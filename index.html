<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="欢迎来到我的博客小站~~">
<meta property="og:type" content="website">
<meta property="og:title" content="xiaxyun">
<meta property="og:url" content="https://xiaxyun.github.io/index.html">
<meta property="og:site_name" content="xiaxyun">
<meta property="og:description" content="欢迎来到我的博客小站~~">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xiaxyun">
<meta name="twitter:description" content="欢迎来到我的博客小站~~">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://xiaxyun.github.io/">





  <title>xiaxyun</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xiaxyun</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Stay Hungry, Stay Foolish</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            日程表
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            站点地图
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2019/05/12/Firstblog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/12/Firstblog/" itemprop="url">Firstblog</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-12T15:54:23+08:00">
                2019-05-12
              </time>
            

            

            
          </span>



          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于&#58;</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  0字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          使用 Hexo - Next 主题
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/05/12/Firstblog/">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2019/05/12/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/12/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-12T15:34:59+08:00">
                2019-05-12
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  73字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2018/07/18/2016-01-06-ReactiveCocoa-进阶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/18/2016-01-06-ReactiveCocoa-进阶/" itemprop="url">ReactiveCocoa 进阶</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-18T00:00:00+08:00">
                2018-07-18
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7k字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  30分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>在<a href="http://xiaxyun.github.io/2016/12/26/ReactiveCocoa-基础/">上篇文章</a>中介绍了<strong>ReactiveCocoa</strong>的基础知识,接下来我们来深入介绍<strong>ReactiveCocoa</strong>及其在<strong>MVVM</strong>中的用法。</p>
</blockquote>
<p><img src="https://ww3.sinaimg.cn/large/006y8lVagw1fbgye3re5xj30je0iomz8.jpg" alt="ReactiveCocoa进阶思维导图"></p>
<h1 id="常见操作方法介绍"><a href="#常见操作方法介绍" class="headerlink" title="常见操作方法介绍"></a>常见操作方法介绍</h1><h4 id="操作须知"><a href="#操作须知" class="headerlink" title="操作须知"></a>操作须知</h4><p>所有的信号（RACSignal）都可以进行操作处理，因为所有操作方法都定义在RACStream.h中，因此只要继承RACStream就有了操作处理方法。</p>
<h4 id="操作思想"><a href="#操作思想" class="headerlink" title="操作思想"></a>操作思想</h4><p>运用的是Hook（钩子）思想，Hook是一种用于改变API(应用程序编程接口：方法)执行结果的技术.</p>
<p>Hook用处：截获API调用的技术。</p>
<p>有关Hook的知识可以看我的这篇博客<a href="http://www.jianshu.com/p/ff114e69cc0a" target="_blank" rel="noopener">《Objective-C Runtime 的一些基本使用》</a>中的 <em>更换代码的实现方法</em> 一节,</p>
<p>Hook原理：在每次调用一个API返回结果之前，先执行你自己的方法，改变结果的输出。</p>
<h4 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h4><h4 id="bind（绑定）-ReactiveCocoa核心方法"><a href="#bind（绑定）-ReactiveCocoa核心方法" class="headerlink" title="bind（绑定）- ReactiveCocoa核心方法"></a><strong>bind</strong>（绑定）- ReactiveCocoa核心方法</h4><p><strong>ReactiveCocoa</strong> 操作的核心方法是 <strong>bind</strong>（绑定）,而且也是RAC中核心开发方式。之前的开发方式是赋值，而用RAC开发，应该把重心放在绑定，也就是可以在创建一个对象的时候，就绑定好以后想要做的事情，而不是等赋值之后在去做事情。</p>
<p>列如，把数据展示到控件上，之前都是重写控件的 <code>setModel</code> 方法，用RAC就可以在一开始创建控件的时候，就绑定好数据。</p>
<ul>
<li><p><strong>作用</strong></p>
<p>  RAC底层都是调用<strong>bind</strong>， 在开发中很少直接使用 <strong>bind</strong> 方法，<strong>bind</strong>属于RAC中的底层方法，我们只需要调用封装好的方法，<strong>bind</strong>用作了解即可.</p>
</li>
<li><p><strong>bind方法使用步骤</strong></p>
<ol>
<li>传入一个返回值 <code>RACStreamBindBlock</code> 的 block。</li>
<li>描述一个 <code>RACStreamBindBlock</code> 类型的 <code>bindBlock</code>作为block的返回值。</li>
<li><p>描述一个返回结果的信号，作为 <code>bindBlock</code> 的返回值。</p>
<p>注意：在bindBlock中做信号结果的处理。</p>
</li>
</ol>
</li>
<li><p><strong>bind方法参数</strong></p>
<p><strong>RACStreamBindBlock</strong>:<br><code>typedef RACStream * (^RACStreamBindBlock)(id value, BOOL *stop);</code></p>
<p><code>参数一(value)</code>:表示接收到信号的原始值，还没做处理</p>
<p><code>参数二(*stop)</code>:用来控制绑定Block，如果*stop = yes,那么就会结束绑定。</p>
<p><code>返回值</code>：信号，做好处理，在通过这个信号返回出去，一般使用 <code>RACReturnSignal</code>,需要手动导入头文件<code>RACReturnSignal.h</code></p>
</li>
<li><p><strong>使用</strong></p>
<p>  假设想监听文本框的内容，并且在每次输出结果的时候，都在文本框的内容拼接一段文字“输出：”</p>
<ul>
<li><p>使用封装好的方法：在返回结果后，拼接。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[_textField.rac_textSignal subscribeNext:^(id x) &#123;</span><br><span class="line"></span><br><span class="line">	// 在返回结果后，拼接 输出：</span><br><span class="line">	NSLog(@&quot;输出:%@&quot;,x);</span><br><span class="line"></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>方式二:，使用RAC中 <code>bind</code> 方法做处理，在返回结果前，拼接。</p>
<p>  这里需要手动导入<code>#import &lt;ReactiveCocoa/RACReturnSignal.h&gt;</code>，才能使用<code>RACReturnSignal</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[[_textField.rac_textSignal bind:^RACStreamBindBlock&#123;</span><br><span class="line">   // 什么时候调用:</span><br><span class="line">   // block作用:表示绑定了一个信号.</span><br><span class="line"></span><br><span class="line">   return ^RACStream *(id value, BOOL *stop)&#123;</span><br><span class="line"></span><br><span class="line">       // 什么时候调用block:当信号有新的值发出，就会来到这个block。</span><br><span class="line"></span><br><span class="line">       // block作用:做返回值的处理</span><br><span class="line"></span><br><span class="line">       // 做好处理，在返回结果前，拼接 输出:</span><br><span class="line">       return [RACReturnSignal return:[NSString stringWithFormat:@&quot;输出:%@&quot;,value]];</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">&#125;] subscribeNext:^(id x) &#123;</span><br><span class="line"></span><br><span class="line">   NSLog(@&quot;%@&quot;,x);</span><br><span class="line"></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>底层实现</strong></p>
<ol>
<li>源信号调用bind,会重新创建一个绑定信号。</li>
<li>当绑定信号被订阅，就会调用绑定信号中的 <code>didSubscribe</code> ，生成一个 <code>bindingBlock</code> 。</li>
<li>当源信号有内容发出，就会把内容传递到 <code>bindingBlock</code> 处理，调用<code>bindingBlock(value,stop)</code></li>
<li>调用<code>bindingBlock(value,stop)</code>，会返回一个内容处理完成的信号<code>RACReturnSignal</code>。</li>
<li><p>订阅<code>RACReturnSignal</code>，就会拿到绑定信号的订阅者，把处理完成的信号内容发送出来。</p>
<p>注意:不同订阅者，保存不同的nextBlock，看源码的时候，一定要看清楚订阅者是哪个。</p>
</li>
</ol>
</li>
</ul>
<h4 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h4><p>映射主要用这两个方法实现：<strong>flattenMap</strong>,<strong>Map</strong>,用于把源信号内容映射成新的内容。</p>
<h6 id="flattenMap"><a href="#flattenMap" class="headerlink" title="flattenMap"></a>flattenMap</h6><ul>
<li><p><strong>作用</strong></p>
<p>  把源信号的内容映射成一个新的信号，信号可以是任意类型</p>
</li>
<li><p><strong>使用步骤</strong></p>
<ol>
<li>传入一个block，block类型是返回值<code>RACStream</code>，参数value</li>
<li>参数value就是源信号的内容，拿到源信号的内容做处理</li>
<li>包装成<code>RACReturnSignal</code>信号，返回出去。</li>
</ol>
</li>
</ul>
<ul>
<li><p><strong>使用</strong></p>
<p>  监听文本框的内容改变，把结构重新映射成一个新值.</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[[_textField.rac_textSignal flattenMap:^RACStream *(id value) &#123;</span><br><span class="line">       </span><br><span class="line">       // block调用时机：信号源发出的时候</span><br><span class="line">       </span><br><span class="line">       // block作用：改变信号的内容</span><br><span class="line">       </span><br><span class="line">       // 返回RACReturnSignal</span><br><span class="line">       return [RACReturnSignal return:[NSString stringWithFormat:@&quot;信号内容：%@&quot;, value]];</span><br><span class="line">       </span><br><span class="line">   &#125;] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>底层实现</strong></p>
<ol start="0">
<li><strong>flattenMap</strong>内部调用 <code>bind</code> 方法实现的,<strong>flattenMap</strong>中block的返回值，会作为bind中bindBlock的返回值。</li>
<li>当订阅绑定信号，就会生成 <code>bindBlock</code>。</li>
<li>当源信号发送内容，就会调用<code>bindBlock(value, *stop)</code></li>
<li>调用<code>bindBlock</code>，内部就会调用 <strong>flattenMap</strong> 的 bloc k，<strong>flattenMap</strong> 的block作用：就是把处理好的数据包装成信号。</li>
<li>返回的信号最终会作为 <code>bindBlock</code> 中的返回信号，当做 <code>bindBlock</code> 的返回信号。</li>
<li>订阅 <code>bindBlock</code> 的返回信号，就会拿到绑定信号的订阅者，把处理完成的信号内容发送出来。</li>
</ol>
</li>
</ul>
<h6 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h6><ul>
<li><p><strong>作用</strong></p>
<p>  把源信号的值映射成一个新的值</p>
</li>
</ul>
<ul>
<li><p><strong>使用步骤</strong></p>
<ol>
<li>传入一个block,类型是返回对象，参数是 <code>value</code></li>
<li><code>value</code>就是源信号的内容，直接拿到源信号的内容做处理</li>
<li>把处理好的内容，直接返回就好了，不用包装成信号，返回的值，就是映射的值。</li>
</ol>
</li>
<li><p><strong>使用</strong></p>
<p>  监听文本框的内容改变，把结构重新映射成一个新值.</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[[_textField.rac_textSignal map:^id(id value) &#123;</span><br><span class="line">      </span><br><span class="line">      // 拼接完后，返回对象</span><br><span class="line">       return [NSString stringWithFormat:@&quot;信号内容: %@&quot;, value];</span><br><span class="line">       </span><br><span class="line">   &#125;] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>底层实现</strong>:</p>
<ol start="0">
<li>Map底层其实是调用 <code>flatternMa</code>p,<code>Map</code> 中block中的返回的值会作为 <code>flatternMap</code> 中block中的值</li>
<li>当订阅绑定信号，就会生成 <code>bindBlock</code> </li>
<li>当源信号发送内容，就会调用 <code>bindBlock(value, *stop)</code></li>
<li>调用 <code>bindBlock</code> ，内部就会调用 <code>flattenMap的block</code></li>
<li><code>flattenMap的block</code> 内部会调用 <code>Map</code> 中的block，把 <code>Map</code> 中的block返回的内容包装成返回的信号</li>
<li>返回的信号最终会作为 <code>bindBlock</code> 中的返回信号，当做 <code>bindBlock</code> 的返回信号</li>
<li>订阅 <code>bindBlock</code> 的返回信号，就会拿到绑定信号的订阅者，把处理完成的信号内容发送出来。</li>
</ol>
</li>
</ul>
<h6 id="FlatternMap-和-Map-的区别"><a href="#FlatternMap-和-Map-的区别" class="headerlink" title="FlatternMap 和 Map 的区别"></a>FlatternMap 和 Map 的区别</h6><ul>
<li><strong>FlatternMap</strong> 中的Block <strong>返回信号</strong>。 </li>
</ul>
<ol start="2">
<li><strong>Map</strong> 中的Block <strong>返回对象</strong>。</li>
<li>开发中，如果信号发出的值 <strong>不是信号</strong> ，映射一般使用 <code>Map</code></li>
<li>如果信号发出的值 <strong>是信号</strong>，映射一般使用 <code>FlatternMap</code>。</li>
</ol>
<ul>
<li><p><code>signalOfsignals</code>用 <strong>FlatternMap</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// 创建信号中的信号</span><br><span class="line">RACSubject *signalOfsignals = [RACSubject subject];</span><br><span class="line">RACSubject *signal = [RACSubject subject];</span><br><span class="line"></span><br><span class="line">[[signalOfsignals flattenMap:^RACStream *(id value) &#123;</span><br><span class="line"></span><br><span class="line"> // 当signalOfsignals的signals发出信号才会调用</span><br><span class="line"></span><br><span class="line">    return value;</span><br><span class="line"></span><br><span class="line">&#125;] subscribeNext:^(id x) &#123;</span><br><span class="line"></span><br><span class="line">    // 只有signalOfsignals的signal发出信号才会调用，因为内部订阅了bindBlock中返回的信号，也就是flattenMap返回的信号。</span><br><span class="line">    // 也就是flattenMap返回的信号发出内容，才会调用。</span><br><span class="line"></span><br><span class="line">    NSLog(@&quot;signalOfsignals：%@&quot;,x);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">// 信号的信号发送信号</span><br><span class="line">[signalOfsignals sendNext:signal];</span><br><span class="line"></span><br><span class="line">// 信号发送内容</span><br><span class="line">[signal sendNext:@&quot;hi&quot;];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h4><p>组合就是将多个信号按照某种规则进行拼接，合成新的信号。</p>
<h6 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h6><ul>
<li><p><strong>作用</strong> </p>
<p>  按<strong>顺序拼接</strong>信号，当多个信号发出的时候，有顺序的接收信号。</p>
</li>
<li><strong>底层实现</strong><ol>
<li>当拼接信号被订阅，就会调用拼接信号的didSubscribe</li>
<li>didSubscribe中，会先订阅第一个源信号（signalA）</li>
<li>会执行第一个源信号（signalA）的didSubscribe</li>
<li>第一个源信号（signalA）didSubscribe中发送值，就会调用第一个源信号（signalA）订阅者的nextBlock,通过拼接信号的订阅者把值发送出来.</li>
<li>第一个源信号（signalA）didSubscribe中发送完成，就会调用第一个源信号（signalA）订阅者的completedBlock,订阅第二个源信号（signalB）这时候才激活（signalB）。</li>
<li>订阅第二个源信号（signalB）,执行第二个源信号（signalB）的didSubscribe</li>
<li>第二个源信号（signalA）didSubscribe中发送值,就会通过拼接信号的订阅者把值发送出来.</li>
</ol>
</li>
<li><p><strong>使用步骤</strong></p>
<ol>
<li>使用<code>concat:</code>拼接信号</li>
<li>订阅拼接信号，内部会自动按拼接顺序订阅信号</li>
</ol>
</li>
<li><p><strong>使用</strong></p>
<p>  拼接信号 <code>signalA</code>、 <code>signalB</code>、 <code>signalC</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;Hello&quot;];</span><br><span class="line">       </span><br><span class="line">       [subscriber sendCompleted];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   RACSignal *signalB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;World&quot;];</span><br><span class="line">       </span><br><span class="line">       [subscriber sendCompleted];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   RACSignal *signalC = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;!&quot;];</span><br><span class="line">       </span><br><span class="line">       [subscriber sendCompleted];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   // 拼接 A B, 把signalA拼接到signalB后，signalA发送完成，signalB才会被激活。</span><br><span class="line">   RACSignal *concatSignalAB = [signalA concat:signalB];</span><br><span class="line">   </span><br><span class="line">   // A B + C</span><br><span class="line">   RACSignal *concatSignalABC = [concatSignalAB concat:signalC];</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   // 订阅拼接的信号, 内部会按顺序订阅 A-&gt;B-&gt;C</span><br><span class="line">   // 注意：第一个信号必须发送完成，第二个信号才会被激活...</span><br><span class="line">   [concatSignalABC subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="then"><a href="#then" class="headerlink" title="then"></a>then</h6><ul>
<li><p><strong>作用</strong> </p>
<p>  用于连接两个信号，当第一个信号完成，才会连接then返回的信号。</p>
</li>
<li><p><strong>底层实现</strong></p>
<ol>
<li>先过滤掉之前的信号发出的值</li>
<li>使用concat连接then返回的信号</li>
</ol>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">   </span><br><span class="line">   [subscriber sendNext:@1];</span><br><span class="line">   </span><br><span class="line">   [subscriber sendCompleted];</span><br><span class="line">   </span><br><span class="line">   return nil;</span><br><span class="line">   </span><br><span class="line"> &#125;] then:^RACSignal *&#123;</span><br><span class="line">   </span><br><span class="line">   	return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@2];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line"> &#125;] subscribeNext:^(id x) &#123;</span><br><span class="line">   </span><br><span class="line">   // 只能接收到第二个信号的值，也就是then返回信号的值</span><br><span class="line">   NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   </span><br><span class="line"> &#125;];</span><br><span class="line"> </span><br><span class="line"> ///</span><br><span class="line"> 输出：2</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>注意</strong></p>
<p>  注意使用<code>then</code>，之前信号的值会被忽略掉.</p>
</li>
</ul>
<h6 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h6><ul>
<li><p><strong>作用</strong> </p>
<p>  合并信号,任何一个信号发送数据，都能监听到.</p>
</li>
<li><p><strong>底层实现</strong></p>
<ol>
<li>合并信号被订阅的时候，就会遍历所有信号，并且发出这些信号。</li>
<li>每发出一个信号，这个信号就会被订阅</li>
<li>也就是合并信号一被订阅，就会订阅里面所有的信号。</li>
<li>只要有一个信号被发出就会被监听。</li>
</ol>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;A&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line"></span><br><span class="line">   RACSignal *signalB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;B&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line"></span><br><span class="line">   // 合并信号, 任何一个信号发送数据，都能监听到</span><br><span class="line">   RACSignal *mergeSianl = [signalA merge:signalB];</span><br><span class="line"></span><br><span class="line">   [mergeSianl subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   // 输出</span><br><span class="line">2017-01-03 13:29:08.013 ReactiveCocoa进阶[3627:718315] A</span><br><span class="line">2017-01-03 13:29:08.014 ReactiveCocoa进阶[3627:718315] B</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h6><ul>
<li><p><strong>作用</strong> </p>
<p>  把两个信号压缩成一个信号，只有当两个信号 <strong>同时</strong> 发出信号内容时，并且把两个信号的内容合并成一个元组，才会触发压缩流的next事件。</p>
</li>
<li><p><strong>底层实现</strong></p>
<ol>
<li>定义压缩信号，内部就会自动订阅signalA，signalB</li>
<li>每当signalA或者signalB发出信号，就会判断signalA，signalB有没有发出个信号，有就会把每个信号 第一次 发出的值包装成元组发出</li>
</ol>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;A1&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;A2&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   RACSignal *signalB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;B1&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;B2&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;B3&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   RACSignal *zipSignal = [signalA zipWith:signalB];</span><br><span class="line">   </span><br><span class="line">   [zipSignal subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line"></span><br><span class="line">// 输出</span><br><span class="line">2017-01-03 13:48:09.234 ReactiveCocoa进阶[3997:789720] zipWith: &lt;RACTuple: 0x600000004df0&gt; (</span><br><span class="line">   A1,</span><br><span class="line">   B1</span><br><span class="line">)</span><br><span class="line">2017-01-03 13:48:09.234 ReactiveCocoa进阶[3997:789720] zipWith: &lt;RACTuple: 0x608000003410&gt; (</span><br><span class="line">   A2,</span><br><span class="line">   B2</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="combineLatest"><a href="#combineLatest" class="headerlink" title="combineLatest"></a>combineLatest</h6><ul>
<li><p><strong>作用</strong> </p>
<p>  将多个信号合并起来，并且拿到各个信号最后一个值,必须每个合并的signal至少都有过一次sendNext，才会触发合并的信号。</p>
</li>
<li><p><strong>底层实现</strong></p>
<ol>
<li>当组合信号被订阅，内部会自动订阅signalA，signalB,必须两个信号都发出内容，才会被触发。</li>
<li>并且把两个信号的 最后一次 发送的值组合成元组发出。</li>
</ol>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;A1&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;A2&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   RACSignal *signalB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;B1&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;B2&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;B3&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   RACSignal *combineSianal = [signalA combineLatestWith:signalB];</span><br><span class="line">   </span><br><span class="line">   [combineSianal subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;combineLatest:%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line"></span><br><span class="line">// 输出</span><br><span class="line">2017-01-03 13:48:09.235 ReactiveCocoa进阶[3997:789720] combineLatest:&lt;RACTuple: 0x60800000e150&gt; (</span><br><span class="line">   A2,</span><br><span class="line">   B1</span><br><span class="line">)</span><br><span class="line">2017-01-03 13:48:09.235 ReactiveCocoa进阶[3997:789720] combineLatest:&lt;RACTuple: 0x600000004db0&gt; (</span><br><span class="line">   A2,</span><br><span class="line">   B2</span><br><span class="line">)</span><br><span class="line">2017-01-03 13:48:09.236 ReactiveCocoa进阶[3997:789720] combineLatest:&lt;RACTuple: 0x60800000e180&gt; (</span><br><span class="line">   A2,</span><br><span class="line">   B3</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>注意</strong></p>
<p>  <strong>combineLatest</strong>与<strong>zip</strong>用法相似，必须每个合并的signal至少都有过一次sendNext，才会触发合并的信号。</p>
<p>  区别看下图：</p>
<p>  <img src="https://ww2.sinaimg.cn/large/006y8lVagw1fbdf6cyez6j30id0kkabf.jpg" alt></p>
</li>
</ul>
<h6 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h6><ul>
<li><p><strong>作用</strong> </p>
<p>  把信号发出元组的值聚合成一个值</p>
</li>
<li><p><strong>底层实现</strong></p>
<ol>
<li>订阅聚合信号，</li>
<li>每次有内容发出，就会执行reduceblcok，把信号内容转换成reduceblcok返回的值。</li>
</ol>
</li>
<li><p><strong>使用</strong></p>
<p>   常见的用法，（先组合在聚合）<code>combineLatest:(id&lt;NSFastEnumeration&gt;)signals reduce:(id (^)())reduceBlock</code></p>
<p>   reduce中的block简介:</p>
<p>   reduceblcok中的参数，有多少信号组合，reduceblcok就有多少参数，每个参数就是之前信号发出的内容<br>   reduceblcok的返回值：聚合信号之后的内容。</p>
</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;A1&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;A2&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   RACSignal *signalB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;B1&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;B2&quot;];</span><br><span class="line">       [subscriber sendNext:@&quot;B3&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   RACSignal *reduceSignal = [RACSignal combineLatest:@[signalA, signalB] reduce:^id(NSString *str1, NSString *str2)&#123;</span><br><span class="line">       </span><br><span class="line">       return [NSString stringWithFormat:@&quot;%@ %@&quot;, str1, str2];</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   [reduceSignal subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   // 输出</span><br><span class="line">   2017-01-03 15:42:41.803 ReactiveCocoa进阶[4248:1264674] A2 B1</span><br><span class="line">2017-01-03 15:42:41.803 ReactiveCocoa进阶[4248:1264674] A2 B2</span><br><span class="line">2017-01-03 15:42:41.803 ReactiveCocoa进阶[4248:1264674] A2 B3</span><br></pre></td></tr></table></figure>
</code></pre><h4 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h4><p>过滤就是过滤信号中的 特定值 ，或者过滤指定 发送次数 的信号。</p>
<h6 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h6><ul>
<li><p><strong>作用</strong></p>
<p>  过滤信号，使用它可以获取满足条件的信号.</p>
<p>  block的返回值是Bool值，返回<code>NO</code>则过滤该信号</p>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// 过滤:</span><br><span class="line">// 每次信号发出，会先执行过滤条件判断.</span><br><span class="line">[[_textField.rac_textSignal filter:^BOOL(NSString *value) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;原信号: %@&quot;, value);</span><br><span class="line"></span><br><span class="line">       // 过滤 长度 &lt;= 3 的信号</span><br><span class="line">       return value.length &gt; 3;</span><br><span class="line">       </span><br><span class="line">   &#125;] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;长度大于3的信号：%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   // 在_textField中输出12345</span><br><span class="line">// 输出</span><br><span class="line">2017-01-03 16:36:54.938 ReactiveCocoa进阶[4714:1552910] 原信号: 1</span><br><span class="line">2017-01-03 16:36:55.383 ReactiveCocoa进阶[4714:1552910] 原信号: 12</span><br><span class="line">2017-01-03 16:36:55.706 ReactiveCocoa进阶[4714:1552910] 原信号: 123</span><br><span class="line">2017-01-03 16:36:56.842 ReactiveCocoa进阶[4714:1552910] 原信号: 1234</span><br><span class="line">2017-01-03 16:36:56.842 ReactiveCocoa进阶[4714:1552910] 长度大于3的信号：1234</span><br><span class="line">2017-01-03 16:36:58.350 ReactiveCocoa进阶[4714:1552910] 原信号: 12345</span><br><span class="line">2017-01-03 16:36:58.351 ReactiveCocoa进阶[4714:1552910] 长度大于3的信号：12345</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="ignore"><a href="#ignore" class="headerlink" title="ignore"></a>ignore</h6><ul>
<li><p><strong>作用</strong></p>
<p>  忽略某些信号.</p>
</li>
<li><p><strong>使用</strong></p>
</li>
<li><p><strong>作用</strong></p>
<p>  忽略某些值的信号.</p>
<p>  底层调用了 <code>filter</code> 与 过滤值进行比较，若相等返回则 <code>NO</code></p>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  	// 内部调用filter过滤，忽略掉字符为 @“1”的值</span><br><span class="line">[[_textField.rac_textSignal ignore:@&quot;1&quot;] subscribeNext:^(id x) &#123;</span><br><span class="line"></span><br><span class="line"> 	 NSLog(@&quot;%@&quot;,x);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="distinctUntilChanged"><a href="#distinctUntilChanged" class="headerlink" title="distinctUntilChanged"></a>distinctUntilChanged</h6><ul>
<li><p><strong>作用</strong></p>
<p>  当上一次的值和当前的值有明显的变化就会发出信号，否则会被忽略掉。</p>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[[_textField.rac_textSignal distinctUntilChanged] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;,x);</span><br><span class="line">   &#125;];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h6><ul>
<li><p><strong>作用</strong></p>
<p>  跳过 <strong>第N次</strong> 的发送的信号.</p>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 表示输入第一次，不会被监听到，跳过第一次发出的信号</span><br><span class="line">[[_textField.rac_textSignal skip:1] subscribeNext:^(id x) &#123;</span><br><span class="line"></span><br><span class="line">   NSLog(@&quot;%@&quot;,x);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="take"><a href="#take" class="headerlink" title="take"></a>take</h5><ul>
<li><p><strong>作用</strong></p>
<p>  取 <strong>前N次</strong> 的发送的信号.</p>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">RACSubject *subject = [RACSubject subject] ;</span><br><span class="line">   </span><br><span class="line">   // 取 前两次 发送的信号</span><br><span class="line">   [[subject take:2] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   [subject sendNext:@1];</span><br><span class="line">   [subject sendNext:@2];</span><br><span class="line">   [subject sendNext:@3];</span><br><span class="line">   </span><br><span class="line">   // 输出</span><br><span class="line">2017-01-03 17:35:54.566 ReactiveCocoa进阶[4969:1677908] 1</span><br><span class="line">2017-01-03 17:35:54.567 ReactiveCocoa进阶[4969:1677908] 2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="takeLast"><a href="#takeLast" class="headerlink" title="takeLast"></a>takeLast</h6><ul>
<li><p><strong>作用</strong></p>
<p>  取 <strong>最后N次</strong> 的发送的信号</p>
<p>  前提条件，订阅者必须调用完成 <code>sendCompleted</code>，因为只有完成，就知道总共有多少信号.</p>
</li>
<li><p><strong>使用</strong>    </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">RACSubject *subject = [RACSubject subject] ;</span><br><span class="line">   </span><br><span class="line">   // 取 后两次 发送的信号</span><br><span class="line">   [[subject takeLast:2] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   [subject sendNext:@1];</span><br><span class="line">   [subject sendNext:@2];</span><br><span class="line">   [subject sendNext:@3];</span><br><span class="line">   </span><br><span class="line">   // 必须 跳用完成</span><br><span class="line">   [subject sendCompleted];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="takeUntil"><a href="#takeUntil" class="headerlink" title="takeUntil"></a>takeUntil</h6><ul>
<li><p><strong>作用</strong></p>
<p>  获取信号直到某个信号执行完成</p>
</li>
<li><p><strong>使用</strong>    </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">	// 监听文本框的改变直到当前对象被销毁</span><br><span class="line">[_textField.rac_textSignal takeUntil:self.rac_willDeallocSignal];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="switchToLatest"><a href="#switchToLatest" class="headerlink" title="switchToLatest"></a>switchToLatest</h6><ul>
<li><p><strong>作用</strong></p>
<p>  用于signalOfSignals（信号的信号），有时候信号也会发出信号，会在signalOfSignals中，获取signalOfSignals发送的最新信号。</p>
</li>
<li><p><strong>注意</strong></p>
<p>  switchToLatest：只能用于信号中的信号</p>
</li>
<li><p><strong>使用</strong>    </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">RACSubject *signalOfSignals = [RACSubject subject];</span><br><span class="line">   RACSubject *signal = [RACSubject subject];</span><br><span class="line">   </span><br><span class="line">   // 获取信号中信号最近发出信号，订阅最近发出的信号。</span><br><span class="line">   [signalOfSignals.switchToLatest subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   [signalOfSignals sendNext:signal];</span><br><span class="line">   [signal sendNext:@1];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="秩序"><a href="#秩序" class="headerlink" title="秩序"></a>秩序</h4><p>秩序包括 <code>doNext</code> 和 <code>doCompleted</code> 这两个方法，主要是在 执行<code>sendNext</code> 或者 <code>sendCompleted</code>之前，先执行这些方法中Block。</p>
<h6 id="doNext"><a href="#doNext" class="headerlink" title="doNext"></a>doNext</h6><p>执行<code>sendNext</code>之前，会先执行这个<code>doNext</code>的 Block</p>
<h6 id="doCompleted"><a href="#doCompleted" class="headerlink" title="doCompleted"></a>doCompleted</h6><p>执行<code>sendCompleted</code>之前，会先执行这<code>doCompleted</code>的<code>Block</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">    </span><br><span class="line">    [subscriber sendNext:@&quot;hi&quot;];</span><br><span class="line">    </span><br><span class="line">    [subscriber sendCompleted];</span><br><span class="line">    </span><br><span class="line">    return nil;</span><br><span class="line">    </span><br><span class="line">&#125;] doNext:^(id x) &#123;</span><br><span class="line">    </span><br><span class="line">    // 执行 [subscriber sendNext:@&quot;hi&quot;] 之前会调用这个 Block</span><br><span class="line">    NSLog(@&quot;doNext&quot;);</span><br><span class="line">    </span><br><span class="line">&#125;] doCompleted:^&#123;</span><br><span class="line">    </span><br><span class="line">    // 执行 [subscriber sendCompleted] 之前会调用这 Block</span><br><span class="line">    NSLog(@&quot;doCompleted&quot;);</span><br><span class="line">&#125;] subscribeNext:^(id x) &#123;</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;%@&quot;, x);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h4 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h4><p><strong>ReactiveCocoa</strong> 中的线程操作 包括 <code>deliverOn</code> 和 <code>subscribeOn</code>这两种，将 <em>传递的内容</em> 或 创建信号时 <em>block中的代码</em> 切换到指定的线程中执行。</p>
<h6 id="deliverOn"><a href="#deliverOn" class="headerlink" title="deliverOn"></a>deliverOn</h6><ul>
<li><p><strong>作用</strong></p>
<p>  内容传递切换到制定线程中，副作用在原来线程中,把在创建信号时block中的代码称之为副作用。</p>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">	// 在子线程中执行</span><br><span class="line">	dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</span><br><span class="line">        </span><br><span class="line">        [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">        </span><br><span class="line">            NSLog(@&quot;%@&quot;, [NSThread currentThread]);</span><br><span class="line">            </span><br><span class="line">            [subscriber sendNext:@123];</span><br><span class="line">            </span><br><span class="line">            [subscriber sendCompleted];</span><br><span class="line">            </span><br><span class="line">            return nil;</span><br><span class="line">        &#125;]</span><br><span class="line">          deliverOn:[RACScheduler mainThreadScheduler]]</span><br><span class="line">          </span><br><span class="line">         subscribeNext:^(id x) &#123;</span><br><span class="line">         </span><br><span class="line">             NSLog(@&quot;%@&quot;, x);</span><br><span class="line">             </span><br><span class="line">             NSLog(@&quot;%@&quot;, [NSThread currentThread]);</span><br><span class="line">         &#125;];</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    // 输出</span><br><span class="line">2017-01-04 10:35:55.415 ReactiveCocoa进阶[1183:224535] &lt;NSThread: 0x608000270f00&gt;&#123;number = 3, name = (null)&#125;</span><br><span class="line">2017-01-04 10:35:55.415 ReactiveCocoa进阶[1183:224482] 123</span><br><span class="line">2017-01-04 10:35:55.415 ReactiveCocoa进阶[1183:224482] &lt;NSThread: 0x600000079bc0&gt;&#123;number = 1, name = main&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>可以看到`副作用`在 *子线程* 中执行，而 `传递的内容` 在 *主线程* 中接收
</code></pre><h6 id="subscribeOn"><a href="#subscribeOn" class="headerlink" title="subscribeOn"></a>subscribeOn</h6><ul>
<li><p><strong>作用</strong></p>
<p>  <strong>subscribeOn</strong>则是将 <code>内容传递</code> 和 <code>副作用</code> 都会切换到指定线程中</p>
</li>
<li><p><strong>使用</strong></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</span><br><span class="line">        </span><br><span class="line">        [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">        </span><br><span class="line">            NSLog(@&quot;%@&quot;, [NSThread currentThread]);</span><br><span class="line">            </span><br><span class="line">            [subscriber sendNext:@123];</span><br><span class="line">            </span><br><span class="line">            [subscriber sendCompleted];</span><br><span class="line">            </span><br><span class="line">            return nil;</span><br><span class="line">        &#125;]</span><br><span class="line">          subscribeOn:[RACScheduler mainThreadScheduler]] //传递的内容到主线程中</span><br><span class="line">         subscribeNext:^(id x) &#123;</span><br><span class="line">         </span><br><span class="line">             NSLog(@&quot;%@&quot;, x);</span><br><span class="line">             </span><br><span class="line">             NSLog(@&quot;%@&quot;, [NSThread currentThread]);</span><br><span class="line">         &#125;];</span><br><span class="line">    &#125;);	</span><br><span class="line">	//</span><br><span class="line">2017-01-04 10:44:47.558 ReactiveCocoa进阶[1243:275126] &lt;NSThread: 0x608000077640&gt;&#123;number = 1, name = main&#125;</span><br><span class="line">2017-01-04 10:44:47.558 ReactiveCocoa进阶[1243:275126] 123</span><br><span class="line">2017-01-04 10:44:47.558 ReactiveCocoa进阶[1243:275126] &lt;NSThread: 0x608000077640&gt;&#123;number = 1, name = main&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>`内容传递` 和 `副作用` 都切换到了 *主线程* 执行
</code></pre><h4 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h4><p>时间操作就会设置信号超时，定时和延时。</p>
<h6 id="interval-定时"><a href="#interval-定时" class="headerlink" title="interval 定时"></a>interval 定时</h6><ul>
<li><p><strong>作用</strong></p>
<p>  定时：每隔一段时间发出信号</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 每隔1秒发送信号，指定当前线程执行</span><br><span class="line">[[RACSignal interval:1 onScheduler:[RACScheduler currentScheduler]] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;定时:%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">// 输出</span><br><span class="line">2017-01-04 13:48:55.196 ReactiveCocoa进阶[1980:492724] 定时:2017-01-04 05:48:55 +0000</span><br><span class="line">2017-01-04 13:48:56.195 ReactiveCocoa进阶[1980:492724] 定时:2017-01-04 05:48:56 +0000</span><br><span class="line">2017-01-04 13:48:57.196 ReactiveCocoa进阶[1980:492724] 定时:2017-01-04 05:48:57 +0000</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="timeout-超时"><a href="#timeout-超时" class="headerlink" title="timeout 超时"></a>timeout 超时</h6><ul>
<li><p><strong>作用</strong></p>
<p>  超时，可以让一个信号在一定的时间后，自动报错。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">RACSignal *signal = [[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       // 不发送信号，模拟超时状态</span><br><span class="line">       // [subscriber sendNext:@&quot;hello&quot;];</span><br><span class="line">       //[subscriber sendCompleted];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;] timeout:1 onScheduler:[RACScheduler currentScheduler]];// 设置1秒超时</span><br><span class="line">   </span><br><span class="line">   [signal subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125; error:^(NSError *error) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, error);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   // 执行代码 1秒后 输出：</span><br><span class="line">   2017-01-04 13:48:55.195 ReactiveCocoa进阶[1980:492724] Error Domain=RACSignalErrorDomain Code=1 &quot;(null)&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="delay-延时"><a href="#delay-延时" class="headerlink" title="delay 延时"></a>delay 延时</h6><ul>
<li><p><strong>作用</strong></p>
<p>  延时，延迟一段时间后发送信号</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">RACSignal *signal2 = [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">       </span><br><span class="line">       [subscriber sendNext:@&quot;延迟输出&quot;];</span><br><span class="line">       </span><br><span class="line">       return nil;</span><br><span class="line">   &#125;] delay:2] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   // 执行代码 2秒后 输出</span><br><span class="line">   2017-01-04 13:55:23.751 ReactiveCocoa进阶[2030:525038] 延迟输出</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="重复"><a href="#重复" class="headerlink" title="重复"></a>重复</h4><h6 id="retry"><a href="#retry" class="headerlink" title="retry"></a>retry</h6><ul>
<li><p><strong>作用</strong></p>
<p>  重试：只要 发送错误 <code>sendError:</code>,就会 重新执行 创建信号的Block 直到成功</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">	__block int i = 0;</span><br><span class="line">    </span><br><span class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">        </span><br><span class="line">        if (i == 5) &#123;</span><br><span class="line">            </span><br><span class="line">            [subscriber sendNext:@&quot;Hello&quot;];</span><br><span class="line">            </span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            </span><br><span class="line">            // 发送错误</span><br><span class="line">            NSLog(@&quot;收到错误:%d&quot;, i);</span><br><span class="line">            [subscriber sendError:nil];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        i++;</span><br><span class="line">        </span><br><span class="line">        return nil;</span><br><span class="line">        </span><br><span class="line">    &#125;] retry] subscribeNext:^(id x) &#123;</span><br><span class="line">        </span><br><span class="line">        NSLog(@&quot;%@&quot;, x);</span><br><span class="line">        </span><br><span class="line">    &#125; error:^(NSError *error) &#123;</span><br><span class="line">        </span><br><span class="line">        NSLog(@&quot;%@&quot;, error);</span><br><span class="line">        </span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">	// 输出</span><br><span class="line">2017-01-04 14:36:51.594 ReactiveCocoa进阶[2443:667226] 收到错误信息:0</span><br><span class="line">2017-01-04 14:36:51.595 ReactiveCocoa进阶[2443:667226] 收到错误信息:1</span><br><span class="line">2017-01-04 14:36:51.595 ReactiveCocoa进阶[2443:667226] 收到错误信息:2</span><br><span class="line">2017-01-04 14:36:51.596 ReactiveCocoa进阶[2443:667226] 收到错误信息:3</span><br><span class="line">2017-01-04 14:36:51.596 ReactiveCocoa进阶[2443:667226] 收到错误信息:4</span><br><span class="line">2017-01-04 14:36:51.596 ReactiveCocoa进阶[2443:667226] Hello</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="replay"><a href="#replay" class="headerlink" title="replay"></a>replay</h6><ul>
<li><p><strong>作用</strong></p>
<p>  重放：当一个信号被多次订阅,反复播放内容</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">	RACSignal *signal = [[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</span><br><span class="line">        </span><br><span class="line">        [subscriber sendNext:@1];</span><br><span class="line">        [subscriber sendNext:@2];</span><br><span class="line">        </span><br><span class="line">        return nil;</span><br><span class="line">    &#125;] replay];</span><br><span class="line">    </span><br><span class="line">    [signal subscribeNext:^(id x) &#123;</span><br><span class="line">        NSLog(@&quot;%@&quot;, x);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    [signal subscribeNext:^(id x) &#123;</span><br><span class="line">        NSLog(@&quot;%@&quot;, x);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    // 输出</span><br><span class="line">2017-01-04 14:51:01.934 ReactiveCocoa进阶[2544:706740] 1</span><br><span class="line">2017-01-04 14:51:01.934 ReactiveCocoa进阶[2544:706740] 2</span><br><span class="line">2017-01-04 14:51:01.934 ReactiveCocoa进阶[2544:706740] 1</span><br><span class="line">2017-01-04 14:51:01.935 ReactiveCocoa进阶[2544:706740] 2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="throttle"><a href="#throttle" class="headerlink" title="throttle"></a>throttle</h6><ul>
<li><p><strong>作用</strong></p>
<p>  节流:当某个信号发送比较频繁时，可以使用节流，在某一段时间不发送信号内容，过了一段时间获取信号的最新内容发出。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">RACSubject *subject = [RACSubject subject];</span><br><span class="line">   </span><br><span class="line">   // 节流1秒，1秒后接收最后一个发送的信号</span><br><span class="line">   [[subject throttle:1] subscribeNext:^(id x) &#123;</span><br><span class="line">       </span><br><span class="line">       NSLog(@&quot;%@&quot;, x);</span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   [subject sendNext:@1];</span><br><span class="line">   [subject sendNext:@2];</span><br><span class="line">   [subject sendNext:@3];</span><br><span class="line">   </span><br><span class="line">   // 输出</span><br><span class="line">   2017-01-04 15:02:37.543 ReactiveCocoa进阶[2731:758193] 3</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="MVVM架构思想"><a href="#MVVM架构思想" class="headerlink" title="MVVM架构思想"></a>MVVM架构思想</h1><hr>
<p>程序为什么要有架构？便于程序开发与维护.</p>
<h4 id="常见的架构"><a href="#常见的架构" class="headerlink" title="常见的架构"></a>常见的架构</h4><ul>
<li><p><strong>MVC</strong></p>
<p>  M:模型 V:视图 C:控制器</p>
</li>
<li><p><strong>MVVM</strong></p>
<p>  M:模型 V:视图+控制器 VM:视图模型</p>
</li>
<li><p><strong>MVCS</strong></p>
<p>   M:模型 V:视图 C:控制器 C:服务类</p>
</li>
<li><p><a href="http://www.cocoachina.com/ios/20140703/9016.html" target="_blank" rel="noopener"><strong>VIPER</strong></a></p>
<p>  V:视图 I:交互器 P:展示器 E:实体 R:路由</p>
</li>
</ul>
<h4 id="MVVM介绍"><a href="#MVVM介绍" class="headerlink" title="MVVM介绍"></a>MVVM介绍</h4><ul>
<li><p>模型(M):保存视图数据。</p>
</li>
<li><p>视图+控制器(V):展示内容 + 如何展示</p>
</li>
<li><p>视图模型(VM):处理展示的业务逻辑，包括按钮的点击，数据的请求和解析等等。</p>
</li>
</ul>
<h1 id="实战一：登录界面"><a href="#实战一：登录界面" class="headerlink" title="实战一：登录界面"></a>实战一：登录界面</h1><h4 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h4><ol>
<li>监听两个文本框的内容</li>
<li>有内容登录按键才允许按钮点击</li>
<li>返回登录结果</li>
</ol>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><ol>
<li>界面的所有业务逻辑都交给控制器做处理</li>
<li>在MVVM架构中把控制器的业务全部搬去VM模型，也就是每个控制器对应一个VM模型.</li>
</ol>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ol>
<li>创建LoginViewModel类，处理登录界面业务逻辑.</li>
<li>这个类里面应该保存着账号的信息，创建一个账号Account模型</li>
<li>LoginViewModel应该保存着账号信息Account模型。</li>
<li>需要时刻监听Account模型中的账号和密码的改变，怎么监听？</li>
<li>在非RAC开发中，都是习惯赋值，在RAC开发中，需要改变开发思维，由赋值转变为绑定，可以在一开始初始化的时候，就给Account模型中的属性绑定，并不需要重写set方法。</li>
<li>每次Account模型的值改变，就需要判断按钮能否点击，在VM模型中做处理，给外界提供一个能否点击按钮的信号.</li>
<li>这个登录信号需要判断Account中账号和密码是否有值，用KVO监听这两个值的改变，把他们聚合成登录信号.</li>
<li>监听按钮的点击，由VM处理，应该给VM声明一个RACCommand，专门处理登录业务逻辑.</li>
<li>执行命令，把数据包装成信号传递出去</li>
<li>监听命令中信号的数据传递</li>
<li>监听命令的执行时刻</li>
</ol>
<h4 id="运行效果"><a href="#运行效果" class="headerlink" title="运行效果"></a>运行效果</h4><p><img src="https://ww3.sinaimg.cn/large/006y8lVagw1fbgvoh8yu6j30bj0l43yz.jpg" alt="登录界面"></p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><p><code>MyViewController.m</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;MyViewController.h&quot;</span><br><span class="line">#import &quot;LoginViewModel.h&quot;</span><br><span class="line"></span><br><span class="line">@interface MyViewController ()</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong) LoginViewModel *loginViewModel;</span><br><span class="line"></span><br><span class="line">@property (weak, nonatomic) IBOutlet UITextField *accountField;</span><br><span class="line"></span><br><span class="line">@property (weak, nonatomic) IBOutlet UITextField *pwdField;</span><br><span class="line"></span><br><span class="line">@property (weak, nonatomic) IBOutlet UIButton *loginBtn;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation MyViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    [self bindModel];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)didReceiveMemoryWarning &#123;</span><br><span class="line">    [super didReceiveMemoryWarning];</span><br><span class="line">    // Dispose of any resources that can be recreated.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 视图模型绑定</span><br><span class="line">- (void)bindModel &#123;</span><br><span class="line"></span><br><span class="line">    // 给模型的属性绑定信号</span><br><span class="line">    //</span><br><span class="line">    RAC(self.loginViewModel.account, account) = _accountField.rac_textSignal;</span><br><span class="line">    RAC(self.loginViewModel.account, pwd) = _pwdField.rac_textSignal;</span><br><span class="line">    </span><br><span class="line">    RAC(self.loginBtn, enabled) = self.loginViewModel.enableLoginSignal;</span><br><span class="line">    </span><br><span class="line">    // 监听登录点击</span><br><span class="line">    [[_loginBtn rac_signalForControlEvents:UIControlEventTouchUpInside] subscribeNext:^(id x) &#123;</span><br><span class="line">        </span><br><span class="line">        [self.loginViewModel.LoginCommand execute:nil];</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">- (IBAction)btnTap:(id)sender &#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - lazyLoad</span><br><span class="line"></span><br><span class="line">- (LoginViewModel *)loginViewModel &#123;</span><br><span class="line">    </span><br><span class="line">    if (nil == _loginViewModel) &#123;</span><br><span class="line">        _loginViewModel = [[LoginViewModel alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return _loginViewModel;</span><br><span class="line">&#125;</span><br><span class="line">```	</span><br><span class="line">		</span><br><span class="line">`LoginViewModel.h`</span><br></pre></td></tr></table></figure>
<p>#import &lt;UIKit/UIKit.h&gt;</p>
<p>@interface Account : NSObject</p>
<p>@property (nonatomic, strong) NSString <em>account;<br>@property (nonatomic, strong) NSString </em>pwd;</p>
<p>@end</p>
<p>@interface LoginViewModel : UIViewController</p>
<p>@property (nonatomic, strong) Account *account;</p>
<p>// 是否允许登录的信号<br>@property (nonatomic, strong, readonly) RACSignal *enableLoginSignal;</p>
<p>@property (nonatomic, strong, readonly) RACCommand *LoginCommand;</p>
<p>@end</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`LoginViewModel.m`</span><br></pre></td></tr></table></figure>
<p>#import “LoginViewModel.h”</p>
<p>@implementation Account</p>
<p>@end</p>
<p>@interface LoginViewModel ()</p>
<p>@end</p>
<p>@implementation LoginViewModel</p>
<ul>
<li><p>(instancetype)init {</p>
<p>  if (self = [super init]) {</p>
<pre><code>[self initialBind];
</code></pre><p>  }<br>  return self;<br>}</p>
</li>
<li><p>(void)initialBind {</p>
<p>  // 监听账号属性改变， 把他们合成一个信号<br>  _enableLoginSignal = [RACSubject combineLatest:@[RACObserve(self.account, account), RACObserve(self.account, pwd)] reduce:^id(NSString <em>accout, NSString </em>pwd){</p>
<pre><code>return @(accout.length &amp;&amp; pwd.length);
</code></pre><p>  }];</p>
<p>  // 处理业务逻辑<br>  _LoginCommand = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {</p>
<pre><code>NSLog(@&quot;点击了登录&quot;);
return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {

    // 模仿网络延迟

    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{

        // 返回登录成功 发送成功信号
        [subscriber sendNext:@&quot;登录成功&quot;];
    });

    return nil;
}];
</code></pre><p>  }];</p>
</li>
</ul>
<pre><code>// 监听登录产生的数据
[_LoginCommand.executionSignals.switchToLatest subscribeNext:^(id x) {

    if ([x isEqualToString:@&quot;登录成功&quot;]) {
        NSLog(@&quot;登录成功&quot;);
    }

}];

[[_LoginCommand.executing skip:1] subscribeNext:^(id x) {

    if ([x isEqualToNumber:@(YES)]) {

        NSLog(@&quot;正在登陆...&quot;);
    } else {

    // 登录成功
    NSLog(@&quot;登陆成功&quot;);

    }

}];
</code></pre><p>}</p>
<p>#pragma mark - lazyLoad</p>
<ul>
<li><p>(Account *)account<br>{<br>  if (_account == nil) {</p>
<pre><code>_account = [[Account alloc] init];
</code></pre><p>  }<br>  return _account;<br>}</p>
</li>
<li><p>(void)viewDidLoad {<br>  [super viewDidLoad];</p>
</li>
</ul>
<p>}</p>
<p>@end</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 实战二：网络请求数据</span><br><span class="line"></span><br><span class="line">#### 需求</span><br><span class="line">1. 请求一段网络数据，将请求到的数据在`tableView`上展示</span><br><span class="line">2. 该数据为豆瓣图书的搜索返回结果，URL：url:https://api.douban.com/v2/book/search?q=悟空传</span><br><span class="line"></span><br><span class="line">#### 分析</span><br><span class="line">1. 界面的所有业务逻辑都交给**控制器**做处理</span><br><span class="line">2. 网络请求交给**MV**模型处理</span><br><span class="line"></span><br><span class="line">#### 步骤</span><br><span class="line"></span><br><span class="line">1. 控制器提供一个视图模型（requesViewModel），处理界面的业务逻辑</span><br><span class="line">2. VM提供一个命令，处理请求业务逻辑</span><br><span class="line">3. 在创建命令的block中，会把请求包装成一个信号，等请求成功的时候，就会把数据传递出去。</span><br><span class="line">4. 请求数据成功，应该把字典转换成模型，保存到视图模型中，控制器想用就直接从视图模型中获取。</span><br><span class="line"></span><br><span class="line">#### 其他</span><br><span class="line"></span><br><span class="line">网络请求与图片缓存用到了[AFNetworking](https://github.com/AFNetworking/AFNetworking) 和 [SDWebImage](https://github.com/rs/SDWebImage),自行在Pods中导入。</span><br></pre></td></tr></table></figure>
<p>platform :ios, ‘8.0’</p>
<p>target ‘ReactiveCocoa进阶’ do</p>
<p>use_frameworks!<br>pod ‘ReactiveCocoa’, ‘~&gt; 2.5’<br>pod ‘AFNetworking’<br>pod ‘SDWebImage’<br>end<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 运行效果</span><br><span class="line"></span><br><span class="line">![](https://ww3.sinaimg.cn/large/006y8lVagw1fbgw1xnz74j30bj0l4408.jpg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 代码</span><br><span class="line"></span><br><span class="line">`SearchViewController.m`</span><br></pre></td></tr></table></figure></p>
<p>#import “SearchViewController.h”</p>
<p>#import “RequestViewModel.h”</p>
<p>@interface SearchViewController ()<uitableviewdatasource></uitableviewdatasource></p>
<p>@property (nonatomic, strong) UITableView *tableView;</p>
<p>@property (nonatomic, strong) RequestViewModel *requesViewModel;</p>
<p>@end</p>
<p>@implementation SearchViewController</p>
<ul>
<li><p>(RequestViewModel *)requesViewModel<br>{<br>  if (_requesViewModel == nil) {</p>
<pre><code>_requesViewModel = [[RequestViewModel alloc] init];
</code></pre><p>  }<br>  return _requesViewModel;<br>}</p>
</li>
<li><p>(void)viewDidLoad {<br>  [super viewDidLoad];</p>
</li>
</ul>
<pre><code>self.tableView = [[UITableView alloc] initWithFrame:self.view.frame];

self.tableView.dataSource = self;

[self.view addSubview:self.tableView];

//
RACSignal *requesSiganl = [self.requesViewModel.reuqesCommand execute:nil];

[requesSiganl subscribeNext:^(NSArray *x) {

    self.requesViewModel.models = x;

    [self.tableView reloadData];
}];
</code></pre><p>}</p>
<ul>
<li><p>(void)didReceiveMemoryWarning {<br>  [super didReceiveMemoryWarning];<br>  // Dispose of any resources that can be recreated.<br>}</p>
</li>
<li><p>(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section<br>{<br>  return self.requesViewModel.models.count;<br>}</p>
</li>
<li><p>(UITableViewCell <em>)tableView:(UITableView </em>)tableView cellForRowAtIndexPath:(NSIndexPath <em>)indexPath<br>{<br>  static NSString </em>ID = @”cell”;<br>  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:ID];<br>  if (cell == nil) {</p>
<pre><code>cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:ID];
</code></pre><p>  }</p>
<p>  Book *book = self.requesViewModel.models[indexPath.row];<br>  cell.detailTextLabel.text = book.subtitle;<br>  cell.textLabel.text = book.title;</p>
<p>  [cell.imageView sd_setImageWithURL:[NSURL URLWithString:book.image] placeholderImage:[UIImage imageNamed:@”cellImage”]];</p>
</li>
</ul>
<pre><code>return cell;
</code></pre><p>}<br>@end<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`RequestViewModel.h`</span><br></pre></td></tr></table></figure></p>
<p>#import &lt;Foundation/Foundation.h&gt;</p>
<p>@interface Book : NSObject</p>
<p>@property (nonatomic, copy) NSString <em>subtitle;<br>@property (nonatomic, copy) NSString </em>title;<br>@property (nonatomic, copy) NSString *image;</p>
<p>@end</p>
<p>@interface RequestViewModel : NSObject</p>
<p>// 请求命令<br>@property (nonatomic, strong, readonly) RACCommand *reuqesCommand;</p>
<p>//模型数组<br>@property (nonatomic, strong) NSArray *models;</p>
<p>@end<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`RequestViewModel.m`</span><br></pre></td></tr></table></figure></p>
<p>#import “RequestViewModel.h”</p>
<p>@implementation Book</p>
<ul>
<li><p>(instancetype)initWithValue:(NSDictionary *)value {</p>
<p>  if (self = [super init]) {</p>
<pre><code>self.title = value[@&quot;title&quot;];
self.subtitle = value[@&quot;subtitle&quot;];
self.image = value[@&quot;image&quot;];
</code></pre><p>  }<br>  return self;<br>}</p>
</li>
</ul>
<ul>
<li><p>(Book <em>)bookWithDict:(NSDictionary </em>)value {</p>
<p>  return [[self alloc] initWithValue:value];<br>}</p>
</li>
</ul>
<p>@end</p>
<p>@implementation RequestViewModel</p>
<ul>
<li><p>(instancetype)init<br>{<br>  if (self = [super init]) {</p>
<pre><code>[self initialBind];
</code></pre><p>  }<br>  return self;<br>}</p>
</li>
</ul>
<ul>
<li><p>(void)initialBind<br>{<br>  _reuqesCommand = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {</p>
<pre><code>RACSignal *requestSiganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {

    NSMutableDictionary *parameters = [NSMutableDictionary dictionary];
    parameters[@&quot;q&quot;] = @&quot;悟空传&quot;;

    //
    [[AFHTTPSessionManager manager] GET:@&quot;https://api.douban.com/v2/book/search&quot; parameters:parameters progress:^(NSProgress * _Nonnull downloadProgress) {

        NSLog(@&quot;downloadProgress: %@&quot;, downloadProgress);
    } success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) {

        // 数据请求成功就讲数据发送出去
        NSLog(@&quot;responseObject:%@&quot;, responseObject);

        [subscriber sendNext:responseObject];

        [subscriber sendCompleted];

    } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {

        NSLog(@&quot;error: %@&quot;, error);
    }];
</code></pre></li>
</ul>
<pre><code>     return nil;
  }];

    // 在返回数据信号时，把数据中的字典映射成模型信号，传递出去
    return [requestSiganl map:^id(NSDictionary *value) {

        NSMutableArray *dictArr = value[@&quot;books&quot;];

        NSArray *modelArr = [[dictArr.rac_sequence map:^id(id value) {

            return [Book bookWithDict:value];

        }] array];

        return modelArr;

    }];

}];
</code></pre><p>}</p>
<p>@end</p>
<p><code>`</code></p>
<blockquote>
<p>最后附上GitHub：<a href="https://github.com/qiubaiying/ReactiveCocoa_Demo" target="_blank" rel="noopener">https://github.com/qiubaiying/ReactiveCocoa_Demo</a></p>
</blockquote>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2018/07/18/2018-07-18-Hello-2018/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/18/2018-07-18-Hello-2018/" itemprop="url">Hello 2018</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-18T00:00:00+08:00">
                2018-07-18
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  432字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>“🙉🙉🙉 ”</p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>BY 的 Blog 就这么开通了。</p>
<p>本来打算在年前完成 Blog 的搭建，不曾料想踩了很多坑。。。</p>
<p><a href="#build">跳过废话，直接看技术实现 </a> </p>
<p>2018 年暑假，BY Blog 总算是搭建好了。</p>
<p>最开始写博客是在<a href="www.jianshu.com">简书</a>这个平台上，简书确实不错，支持markdown在线编辑。</p>
<p>在一次偶然间，听到我的好基友 <strong>阳阳</strong> 想搭建个人主页，觉得作为一个程序员，是应该倒腾倒腾自己的Blog，于是乎就开始了撸起袖子干了。</p>
<h2 id><a href="#" class="headerlink" title></a><p id="build"></p></h2><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>接下来说说搭建这个博客的技术细节。  </p>
<p>正好之前就有关注过 <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> + <a href="http://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a> 快速 Building Blog 的技术方案，非常轻松时尚。</p>
<p>其优点非常明显：</p>
<ul>
<li><strong>Markdown</strong> 带来的优雅写作体验</li>
<li>非常熟悉的 Git workflow ，<strong>Git Commit 即 Blog Post</strong></li>
<li>利用 GitHub Pages 的域名和免费无限空间，不用自己折腾主机<ul>
<li>如果需要自定义域名，也只需要简单改改 DNS 加个 CNAME 就好了 </li>
</ul>
</li>
<li>Jekyll 的自定制非常容易，基本就是个模版引擎</li>
</ul>
<hr>
<p>主题我直接 Downlosd 了 <a href="https://huangxuan.me/" target="_blank" rel="noopener">Hux的博客主题</a> 的进行修改，简单粗暴，不过遇到了很多坑😂，好在都填完了。。。</p>
<p>本地调试环境需要 <code>gem install jekyll</code>，结果 rubygem 的源居然被墙了，<del>后来手动改成了我大淘宝的镜像源才成功</del>，淘宝的源已经<a href="https://gems.ruby-china.org/" target="_blank" rel="noopener">停止维护</a>，换成了OSChina的源 <code>https://gems.ruby-china.org/</code>。</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>最后，感谢 Hux 提供的的 <a href="https://github.com/Huxpro/huxpro.github.io" target="_blank" rel="noopener">Blog 主题</a></p>
<p>如果你恰好逛到了这里，希望你也能喜欢这个博客主题，感兴趣的话可以自己动手搭建一个。</p>
<p>—— BY 后记于 2018.07</p>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2018/06/05/2018-06-05-5分钟带你看完-WWDC-2018/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/05/2018-06-05-5分钟带你看完-WWDC-2018/" itemprop="url">5分钟带你看完 WWDC 2018</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-05T00:00:00+08:00">
                2018-06-05
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.9k字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  10分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>一年一度的 WWDC（苹果全球开发者大会）于北京时间 6月5日 凌晨1点开幕。废话不多说，来看看这次WWDC 都有哪些亮点吧!</p>
<h2 id="iOS-12-和-ARKit-2-0"><a href="#iOS-12-和-ARKit-2-0" class="headerlink" title="iOS 12 和 ARKit 2.0"></a>iOS 12 和 ARKit 2.0</h2><blockquote>
<p>关键词：官方防沉迷最为致命</p>
</blockquote>
<h3 id="iOS-12"><a href="#iOS-12" class="headerlink" title="iOS 12"></a>iOS 12</h3><p>iOS 12 相较于 iOS 11 并没有太多UI上的变动，刚更新完 bate 版本的 iOS 12，完全感觉不到这是个新系统。</p>
<p>iOS 12 主要是对安全和性能的优化，iOS 12 在旧设备上的运行速度比 iOS 11更块，程序加载速度快了一倍。（PS：看来苹果并没有放弃旧设备）</p>
<p><img src="https://cdn.mos.cms.futurecdn.net/RdxhPVv8fAyM6oHsRgF6dH-650-80.png" alt></p>
<h3 id="ARKit-2-0"><a href="#ARKit-2-0" class="headerlink" title="ARKit 2.0"></a>ARKit 2.0</h3><p>Apple 与 皮克斯 合作开发了一种用于共享AR内容的新文件格式，新的 AR 格式名为 USDZ。</p>
<p>作为一个含着金苹果出生的新生儿，USDZ 一开始就得到了 Adobe Creative Cloud （包括 Photoshop CC、InDesign CC、Illustrator CC、Dreamweaver CC、Premiere Pro CC）套件的支持。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-10.jpg" alt></p>
<p>同时，面向开发者的开发套件 ARKit 则升级到了二代，主要提升了面部跟踪、渲染能力、3D 探测和共享体验等能力。</p>
<p>随后展示了一款名为 Measure 的 App，可使用AR查看物品大小。</p>
<p><img src="https://cdn.mos.cms.futurecdn.net/4tbGCxGUGsH9VwSLsfMDK5-650-80.png" alt></p>
<p>最后为了演示新的 AR 能力和效果，苹果请来了乐高的创意总监来捧场。这是一个真实的乐高积木建筑物为基础，最多四个人可以用苹果 AR 应用进行游戏，可以在真实环境中模拟出各种虚拟的形象和建筑。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-9.jpg" alt><br><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-11.jpg" alt></p>
<h3 id="相册优化"><a href="#相册优化" class="headerlink" title="相册优化"></a>相册优化</h3><p>iOS 12 的相册将大大提升搜索性能，系统不仅会提出搜索建议，还会帮你按主题整理照片。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-13.jpg" alt></p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-14.jpg" alt></p>
<h3 id="Siri变得更聪明"><a href="#Siri变得更聪明" class="headerlink" title="Siri变得更聪明"></a>Siri变得更聪明</h3><p>iOS 12 中，苹果为 Siri 提供了更加高效的操作，让它可以操作各个应用内部的功能，并且能在锁屏界面建议用户下一步的行动。</p>
<p>苹果还发布了一款名为「Shortcuts」的应用，它允许用户自定义 Siri 搜索指令，支持通过拖拽来快速编辑指令，同时还提供了一个指令库供用户下载现成的命令，就像是为 Siri 打造的 Workflow 自动化工具。</p>
<p><img src="https://cdn.sspai.com/2018-06-04-Artboard.jpg?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1" alt></p>
<p>看到这里，相比熟悉苹果的朋友大概明白了，Siri 的本次改进，很可能是源于它收购的效率神器 Workflow，堪称一个用 Siri 唤醒的 Workflow。</p>
<h3 id="原生应用大更新"><a href="#原生应用大更新" class="headerlink" title="原生应用大更新"></a>原生应用大更新</h3><p>iOS 12 中，不少原生应用都得到了更新。</p>
<ul>
<li>iBooks 更名为 <strong>Apple Books</strong>，采用类似 App Store 的新界面设计。</li>
<li>新闻应用（News）在 iPad 上新添加了侧边栏，方便浏览，也突出策划内容。</li>
<li>语音备忘录现在支持 iCloud 了</li>
<li>股市的界面重构，可以看到股票全天走势，并打通 News 应用，方便看财经新闻；</li>
</ul>
<h3 id="CarPlay-开放了"><a href="#CarPlay-开放了" class="headerlink" title="CarPlay 开放了"></a>CarPlay 开放了</h3><p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-21.jpg" alt></p>
<p>CarPlay 变得更加开放了，曾经被苹果狠心抛弃的 Google Maps 和 Google 的干儿子地图 Waze，以及来自东方的神秘力量高德地图成为首批 CarPlay 支持的第三方导航，从此“志玲姐姐为您导航”将可以常伴林肯领航者车主左右，中国梦和美国梦一起实现。</p>
<h3 id="防手机沉迷-划重点！"><a href="#防手机沉迷-划重点！" class="headerlink" title="防手机沉迷 - 划重点！"></a>防手机沉迷 - 划重点！</h3><p>本次 iOS 12 的重点就是：<strong>防沉迷！</strong></p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-25.jpg" alt></p>
<p>鉴于手机上瘾成为了一个社会议题，今年 Google 和苹果都不约而同地将“防沉迷”加入到了系统更新当中：</p>
<ul>
<li><strong>Do Not Disturb（别吵我）</strong>功能将关掉手机的视觉通知，在夜深人静想起她或梦见她的时候，来了邮件也不会亮屏刺破夜的静谧和黑暗</li>
<li>Deliver Quietly（安静通知）则是将消息推送静默化、不显示在锁屏，也不出声，也不会在 app 右上角标红</li>
<li><strong>Grouped Notifications（分组通知</strong>）可以将某一类型的通知归组，微信群聊消息不再有轰炸的感觉</li>
<li><strong>Reports（应用报告）</strong>可以用周报告的形式，告诉用户用什么应用最多，哪个应用通知最多，每天起床第一个打开的是什么应用等等</li>
<li><strong>App Limits（应用限制</strong>）可以给某个应用规定使用时间，当然这不是强制性的，用户可以突破限制继续“吃鸡”</li>
<li><strong>Allowances（零用钱？）</strong> 是家长限制孩子使用应用的新特性</li>
</ul>
<h3 id="iMessage-和-FeacTime"><a href="#iMessage-和-FeacTime" class="headerlink" title="iMessage 和 FeacTime"></a>iMessage 和 FeacTime</h3><p>Animoji 新增了 4 个新表情（幽灵，考拉，老虎和霸王龙），用户还可以为自己量身定做 Animoji ，并用到各种场景——这就是全新的 Memoji 技术</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-26.jpg" alt></p>
<p><img src="https://cdn.sspai.com/2018/06/05/67b6fba3d36bdd7caf09bec94dcb157b.jpg?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1" alt></p>
<p>iOS 版 <strong>FaceTime</strong> 迎来了群聊功能，最多支持 32 人同时聊天，成员可以随时加入或离开聊天。聊天界面用瀑布流的形式呈现，正在说话的成员窗口会自动放大。macOS 版 FaceTime 同样也得到了更新。</p>
<p><img src="https://cdn.sspai.com/2018-06-04-Screen%20Shot%202018-06-05%20at%202.00.58%20AM.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1" alt></p>
<h2 id="tvOS"><a href="#tvOS" class="headerlink" title="tvOS"></a>tvOS</h2><blockquote>
<p>关键词：优化试听体验</p>
</blockquote>
<p>tvOS 今年的变化比较小，更新主要集中在了影视资源以及细节优化上。</p>
<p>Apple TV 4K 将支持杜比全景声和杜比视界，让你在家里也能获得电影院般的听觉体验。</p>
<p><img src="https://cdn.sspai.com/2018-06-04-Screen%20Shot%202018-06-05%20at%202.26.21%20AM.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1" alt></p>
<h2 id="watchOS-5"><a href="#watchOS-5" class="headerlink" title="watchOS 5"></a>watchOS 5</h2><blockquote>
<p>关键词：运动进行到底</p>
</blockquote>
<p>随着 Apple Watch 成长的，还有它的操作系统 watchOS，这一次 watchOS 升级到了第五代。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-31.jpg" alt></p>
<p>Apple Watch 的功能朝着运动的方向发展，此次 watchOS 5 的更新，也以运动为主。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-35.jpg" alt></p>
<p>watchOS 5 的一个小惊喜是让 Apple Watch 成为了对讲机，这个应用名为 Walkie Talkie（对讲机）。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-38.jpg" alt></p>
<p>Apple Watch 早就支持了 Apple Pay，不过在通知上，Apple Watch 显然可以做得更多，比如值机和给滴滴师傅付款评分，手表不再只是个通知器，也能做些轻交互。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-51.jpg" alt></p>
<p>还有 Apple Watch 可以浏览网页了~</p>
<h2 id="macOS-Mojave"><a href="#macOS-Mojave" class="headerlink" title="macOS Mojave"></a>macOS Mojave</h2><blockquote>
<p>关键词：夜间模式、全新的App Store</p>
</blockquote>
<p><img src="https://cdn.sspai.com/2018-06-04-macOS01.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1" alt></p>
<p>对于大多数人来说，macOS 更新最大的悬念，是新系统叫什么名字。</p>
<p>答案是：<strong>macOS Mojave</strong>，Mojave 中译名是莫哈韦沙漠，位于在美国加利福尼亚西南，出于洛杉矶和拉斯维加斯之间。</p>
<p>在 Mojave 这版系统中，苹果加入了一套适应暗光环境下使用的夜间主题，并对 Mac App Store 的交互界面进行了重塑，整个系统的改变甚至连库克都称为是苹果的一次 “巨大的跨越”。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-89.jpg" alt></p>
<h3 id="夜间模式-动态桌面"><a href="#夜间模式-动态桌面" class="headerlink" title="夜间模式 / 动态桌面"></a>夜间模式 / 动态桌面</h3><p>不少用户会在暗光环境下使用电脑，即便是将屏幕亮度调到最低，也难免会因为白底色为主的主题而感到刺眼。在这次更新中，macOS Mojave 新增加了一套暗色主题，不同于目前将菜单和程序栏调成暗色的选项，新系统上的是一套全局暗色主题，即便是在文件夹、应用里都是以黑色为主色呈现。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-63.jpg" alt></p>
<p>另外，系统可根据时间变化对桌面进行自动调整，日间使用时系统为正常主题；夜间使用时系统则自动切换至暗色模式主题。此时，台下的开发者们爆发出了一阵欢呼，大概是这个主题能够提升程序员朋友夜间加班的幸福感吧。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-63.jpg" alt></p>
<h3 id="智能分类"><a href="#智能分类" class="headerlink" title="智能分类"></a>智能分类</h3><p>macOS 会跟据文件类型和标签对桌面的文件进行自动分类整理，从此再也不用担心满桌面都是文件了。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-82.jpg" alt></p>
<p><img src="https://cdn.sspai.com/2018-06-04-macOS04.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1" alt></p>
<h3 id="快速查看升级"><a href="#快速查看升级" class="headerlink" title="快速查看升级"></a>快速查看升级</h3><p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-92.jpg" alt></p>
<p>访达在这次系统上的更新并不多，只是针对图片查看增添了 “图库视图” 功能。通过 “图库视图”，用户可更加便捷快速地浏览到访达文件夹内的图片内容，与此同时功能内部也内置了图片元数据显示窗，用户可以借助数据窗口了解到图片的相关详情，并且可对图片进行快速编辑操作。</p>
<h3 id="截图-录屏操作-类似iOS"><a href="#截图-录屏操作-类似iOS" class="headerlink" title="截图/录屏操作 - 类似iOS"></a>截图/录屏操作 - 类似iOS</h3><p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-93.jpg" alt></p>
<p>此次 macOS Mojave 加入了 “系统级” 的截屏功能，用户也可以在截屏后对截屏图片进行简单的标记。不过实际上，目前不少社交软件其实都已经具备了截图 + 标记的相关功能，且在体验上也相当不错。</p>
<h3 id="安全权限"><a href="#安全权限" class="headerlink" title="安全权限"></a>安全权限</h3><p>当我们在 iOS 系统上打开刚下载的应用程序时，系统会弹出弹窗，提示是否允许程序访问用户信息和手机硬件。而这次苹果也将相关的安全控制策略从 iOS “搬” 到了 macOS 上，当用户打开某个网址或程序时，系统会弹出 “是否允许访问” 的弹窗以获得用户批准。这也可能是为了呼应最近越发严格的隐私政策。</p>
<h3 id="在-macOS-上运行的几款-iOS-程序"><a href="#在-macOS-上运行的几款-iOS-程序" class="headerlink" title="在 macOS 上运行的几款 iOS 程序"></a>在 macOS 上运行的几款 iOS 程序</h3><p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-84.jpg" alt></p>
<p>将 iOS 的应用程序搬到 macOS 上运行是不少玩家曾经有过的想法。此次苹果在新版的 macOS 系统上加入了 iOS 端的新闻、股市、家、语音备忘录四个程序，用户可以在桌面系统上通过这几款应用阅读新闻、控制家庭设备等等。</p>
<p>在发布会的最后，苹果否认了将对 iOS 和 macOS 进行合并的传闻，但考虑到 iOS 平台有非常庞大的应用数量，他们也希望其中的部分应用能来到 macOS。于是苹果在发布会上为大家提前预览了一个准备多年的项目，macOS 将可以使用 iOS 的 UIKit 框架进行开发，以降低开发多平台应用的成本。</p>
<p><img src="https://cdn.sspai.com/2018-06-04-Screen%20Shot%202018-06-05%20at%203.08.05%20AM.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1" alt></p>
<p>比如这次 macOS Mojave 中新增的 4 款应用——News、股票、语音备忘录、家庭——均采用了这种新技术。</p>
<h3 id="全新的-Mac-App-Store"><a href="#全新的-Mac-App-Store" class="headerlink" title="全新的 Mac App Store"></a>全新的 Mac App Store</h3><p><img src="https://cdn.sspai.com/2018-06-04-macOS09.jpg?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1" alt></p>
<p>在 iOS 11 对 Mac App Store 进行了重新设计后，macOS Mojave 也迎来了全新设计的 Mac App Store。新版拥有与 iOS 上 App Store 类似的发现页，里面能看到每日编辑推荐和一些 App 的使用技巧。进入 App 页面后，你可以看到视频预览和与 iOS 类似的评分系统。为了方便用户评分，新版 macOS 还加入了和 iOS 一样的 App 内打分功能。此外，苹果还宣布包括 Office 365 和 Adobe Lightroom CC 在内的一批重量级 App 将在今年稍后登录 Mac App Store。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>是的，这次的 WWDC 只有软件，没有新的电子设备发布，没有新 iPad Pro、没有 iPhone SE2、没有带八代酷睿的新 MacBook，唯一能和“硬件”沾上边的就是一个新的彩虹表带。</p>
<p><img src="https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-56.jpg" alt></p>
<p>时至今日，苹果生态已经日趋完善了，大概苹果的产品经理们也想不出什么石破天惊的功能让大家 wow 一声了，有的只是细节层面的改进。作为看客和用户，也只能接受这样的现实了。</p>
<p>对了，那个可以四个人一起玩的乐高积木和 AR 应用，倒是可以考虑买来玩一下，不要一边说没有新东西，一边又对新东西视而不见。</p>
<p>对于 iOS 开发者来说，macOS 将可以使用 iOS 的 UIKit 框架进行开发是一个值得关注的点。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2018/101/" target="_blank" rel="noopener">WWDC 2018 Keynote</a></li>
<li><a href="https://www.techradar.com/news/apple-wwdc-2018-keynote" target="_blank" rel="noopener">Apple WWDC 2018: what’s new? All the announcements from the keynote</a></li>
<li><a href="http://www.ifanr.com/1043270" target="_blank" rel="noopener">iOS 加入「防沉迷」，macOS 有了暗色主题，今年的 WWDC 重点都在系统上</a></li>
<li><a href="https://sspai.com/post/44816" target="_blank" rel="noopener">苹果 WWDC 2018：最全总结看这里，不错过任何重点</a></li>
</ul>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2018/01/04/2018-01-04-柔术最大的谎言「译」/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/04/2018-01-04-柔术最大的谎言「译」/" itemprop="url">柔术最大的谎言「译」</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-04T00:00:00+08:00">
                2018-01-04
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.7k字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>译自 <a href="http://www.jiujitsubrotherhood.com/the-biggest-lie-in-jiu-jitsu/" target="_blank" rel="noopener">《THE BIGGEST LIE IN JIU JITSU》</a></p>
</blockquote>
<p><img src="http://mjrnxewya3t1in23ybpwjw59.wpengine.netdna-cdn.com/wp-content/uploads/buchecha-marcus-almeida-roger-gracie.jpg" alt="Marcus&#39;Buchecha&#39;Almeida - 现任IBJJF绝对冠军。这家伙很坚强，相信我！图片由BJJ Pix的William Burkhardt提供  。"></p>
<p>最近我看到了一个让我捧腹的柔术笑话。</p>
<p>“柔术的技术是无敌的！”</p>
<p>你可能不想听听下面的内容，但是作为一名柔术教练，我的工作是与你分享我认为的真理，而不是虚假的谎言。所以在这里与你们分享我的见解：</p>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ul>
<li>技术不是无敌的</li>
<li>我的见解</li>
<li>一个假设</li>
<li>真实的例子</li>
<li>这个神话是从哪里来的？</li>
<li>好消息</li>
<li>如何变得更强</li>
<li>你该怎么做</li>
</ul>
<h2 id="技术不是无敌的"><a href="#技术不是无敌的" class="headerlink" title="技术不是无敌的"></a>技术不是无敌的</h2><p>基础运动能力，特别是力量，对柔术的表现起着巨大的作用，而且往往可以克服技巧。尽管你被告知了卓越的技术并不总是能克服体型和力量优势。但在我看来，力量和技术一样重要。</p>
<h2 id="我的见解"><a href="#我的见解" class="headerlink" title="我的见解"></a>我的见解</h2><p>我练习巴西柔术将近二十年，已经是一个黑带了。我认为自己是一个技术顶尖的柔术运动员，我致力于使自己的技术动作更加高效和精准。</p>
<p>但是这里有个小秘密：有时候，我会利用力量强行完成一个柔术动作。我并不常这样做，但我明白力量对于柔术的重要性，并且它可以更好的帮助我完成动作，我已经认识到这样做是正确的。</p>
<p>我的脑袋中仍然有一种“无力游戏”的想法，那就是我技术非常优秀，以至于我不需要出力就可以降服对手。但我知道这只是我的一个天真的想法。</p>
<p>是的，世界顶尖的柔术运动员毫无疑问都拥有顶尖的柔术技术。但是，他们无一例外都是非常强壮的人。由于先天的遗传和后天科学的训练，这些家伙拥有不可思议的力量和体格。</p>
<p>我的经验得出的这个等式适用与大多数情况：</p>
<blockquote>
<p><strong>运动员A（中等技术 + 上等身体素质） &gt;  运动员B（上等技术 + 下等身体素质）</strong></p>
</blockquote>
<h3 id="一个假设"><a href="#一个假设" class="headerlink" title="一个假设"></a>一个假设</h3><p>我知道你还不相信我，所以我会用一个例子来说明我的观点。让我们来看看使用两个战士 Steve 和 JoJo 的假想情景。</p>
<h4 id="Steve"><a href="#Steve" class="headerlink" title="Steve:"></a>Steve:</h4><p>Steve 5岁开始学习柔术，由马塞洛·加西亚，拉法·门德斯和瑞克森·格雷西执教。它学会了他们所有的技巧，并且吸收了他们所有关于压力，时间和人体力学的智慧。他在接下来的13年里每周训练6天。</p>
<p>18岁，体重200磅的 Steve 击败了所有对手取得了 <a href="https://en.wikipedia.org/wiki/International_Brazilian_Jiu-Jitsu_Federation" target="_blank" rel="noopener">IBJJF（国际巴西柔术联合会</a>）世界锦标赛的棕色带中量级冠军，并且立即被授予黑带。第二年，在对战拥有绝对黑带实力的 Buchecha（开头照片中的人）的决赛中，用了一个飞身十字固在13秒内降服了他。</p>
<h4 id="JoJo："><a href="#JoJo：" class="headerlink" title="JoJo："></a>JoJo：</h4><p>JoJo 是一个10岁的银背大猩猩。他体重400磅。他从未接受过柔术或其他武术的训练。</p>
<h4 id="一决胜负："><a href="#一决胜负：" class="headerlink" title="一决胜负："></a>一决胜负：</h4><p>假设 JoJo 与 Steve 展开一场柔术规则的比赛。</p>
<p>你认为谁会赢得这场比赛？如果你认为 Steve 会用他的“无敌技巧”击败 JoJo，那么你就是妄想。（此外，你可以用 <a href="https://en.wikipedia.org/wiki/Dim_Mak_Records" target="_blank" rel="noopener">点穴</a> 试试~）</p>
<p>JoJo 的<strong>体格</strong>与<strong>力量</strong>优势根本无法用技术来克服。</p>
<p><img src="http://mjrnxewya3t1in23ybpwjw59.wpengine.netdna-cdn.com/wp-content/uploads/gorilla.jpg" alt="你可以知道世界上所有的柔术运动，但是你不会打败JoJo。"></p>
<h3 id="真实的例子"><a href="#真实的例子" class="headerlink" title="真实的例子"></a>真实的例子</h3><p>好吧，上面的例子非常不切实际，根本不会发生。但是，我可以举一些我身边的例子：</p>
<h4 id="例子1"><a href="#例子1" class="headerlink" title="例子1:"></a>例子1:</h4><p>在2013年，我亲眼目睹了世界冠军中，一位黑带女性与体重相同的紫色带男性的比赛，他们在一个开放的垫子上打成一片。这个女人一点机会都没有。她在6分钟内拍垫近十次。</p>
<p>那么现在是因为“女人不擅长柔术”还是因为“男人比女人好”呢？当然不是。这只是一个简单的力量问题。这位男性拥有更高的睾酮水平，因此拥有更强大的结缔组织和更多的肌肉。</p>
<h4 id="例子2"><a href="#例子2" class="headerlink" title="例子2:"></a>例子2:</h4><p>我有一个朋友身高 1.95m，重达 300磅（136kg），是一个前NCAA中后卫球员。同时他也是柔术棕色腰带。他可以（而且经常）很容易地只用一只手臂将我从地面上抬起。当我们滚动时他绝对砸我，这时候基本上我是无能为力的。</p>
<p>这是否因为他的技术比我好？当然不是。我的训练的时间比他更长，训练频率和强度要高得多。这是因为他比我更高，更大，更强壮。</p>
<h4 id="例子3"><a href="#例子3" class="headerlink" title="例子3:"></a>例子3:</h4><p>我的正常体重大约是203磅（92kg）。有时，由于各种原因，包括力量训练计划，肌酸周期或假日过度放纵，可能会高达218甚至220磅。</p>
<p>因为我一直在垫子上呆着，所以我可以敏锐的察觉到体重对于柔术的影响。我可以直接告诉你：你越重，对抗越轻松。我可以更轻松的控制体重较轻的对手，并且能对抗更长的时间。</p>
<h3 id="这个神话是从哪里来的？"><a href="#这个神话是从哪里来的？" class="headerlink" title="这个神话是从哪里来的？"></a>这个神话是从哪里来的？</h3><h4 id="传统武术的胡扯"><a href="#传统武术的胡扯" class="headerlink" title="传统武术的胡扯"></a>传统武术的胡扯</h4><p>这个误解也是传统武术的骗人的精髓所在。告诉一个弱小的人学习了某种武术，他就轻松可以击败比他高大，更强壮的坏人。</p>
<p>在20世纪，一个巨大的产业就建立在这个基础之上，各种乱七八糟的武术系统被包装并推给了好骗的西方人。尽管MMA中的柔术技术帮助清除了许多武术的骗局，但现在仍然受到影响。</p>
<h4 id="柔术课的结构"><a href="#柔术课的结构" class="headerlink" title="柔术课的结构"></a>柔术课的结构</h4><p>还有一部分原因是由于柔术学院商业模式的本质。虽然柔术比赛竞争激烈，但是现在的柔术学院通常还只是围绕着<code>技术动作</code>和<code>实战对抗</code>这两个方面进行教学和训练。因此，早期的先驱者重视身体训练，这是有道理的。</p>
<p>乔治·圣皮埃尔的教练Firhas Zahabi曾经对我说过。“随着柔术学院商业化的推广，我们看到了很多必要的体能训练消失了。”他说的对，在绝大多数的柔术学院中，体能训练并不被重视。当然，你也可以做一些跳跃俯卧撑和俯卧撑作为热身的一部分，但这还远远不够。看看拳击手和摔跤手。体能训练往往是他们训练的最重要的组成部分，而对抗往往是花时间最小的一个。</p>
<h4 id="罗伊斯·格雷斯-与-UFC"><a href="#罗伊斯·格雷斯-与-UFC" class="headerlink" title="罗伊斯·格雷斯 与 UFC"></a>罗伊斯·格雷斯 与 UFC</h4><p>罗伊斯·格雷西（Royce Gracie）在 UFC 早期的比赛中的惊人表现导致了一些人相信技术确实是无敌的。在我看来，罗伊斯赢了，因为他打的比赛看起来像这样：</p>
<blockquote>
<p><strong>斗士A（中等属性+强大的技术）&gt; 斗士B（伟大的属性+没有技术）</strong></p>
</blockquote>
<p>由于第二代 MMA 斗士的的属性已经改变，因为家伙们已经开始学习柔术了。比赛开始更像这样：</p>
<blockquote>
<p><strong>斗士A（中等属性+强大技术）≥ 斗士B（强大属性+一点点技巧）</strong></p>
</blockquote>
<p>在如今的 MMA 比赛中，我们经常看到的情况是这样的：</p>
<blockquote>
<p><strong>斗士A（卓越的属性+伟大的技术）&gt; 斗士B（伟大的属性+伟大的技术）</strong></p>
</blockquote>
<h4 id="杠杠原理的迷惑"><a href="#杠杠原理的迷惑" class="headerlink" title="杠杠原理的迷惑"></a>杠杠原理的迷惑</h4><p>杠杠原理能成倍加强力量，但不是力量的来源。当然，杠杠原理能帮你能更有效的利用力量，但没有力量来源，这个杠杠力也不复存在。这就是‘柔术’中‘杠杠原理’这个概念的迷惑性。</p>
<p>尽管可能会有人告诉你，没有人能为柔术添加杠杠作用。但是一些聪明的运动员及教练确实能够准确的找到杠杠的支点，并且使用的力量来完成动作，效果惊人。</p>
<h3 id="好消息"><a href="#好消息" class="headerlink" title="好消息"></a>好消息</h3><p>好消息是就算你只进行柔术对抗训练也能自然而然的提升你的体能，尽管这个提升有局限性并且基因决定了你的体能极限（抱歉，就是这样），而通过科学而且集中体能训练可以大幅度提升你的体能。</p>
<p>同时，体型小的训练者并不是总是处于劣势。相对力量会随着体型的增加而减小。所以假设其他条件相同的情况下，一个体重比你大20%的对手，力量并不会比你大20%，通常这个值会是12%~15%。这就意味着那些拥有惊人身体的小个子训练者通常会扳平体型的劣势，有时候甚至还会反超。</p>
<p>最后一个就是力量的增长也会随着年龄的增长而称下降的趋势，并在年老的时候就维持不变了。“人的力量就是这么真实”。</p>
<h3 id="如何变得更强"><a href="#如何变得更强" class="headerlink" title="如何变得更强"></a>如何变得更强</h3><h4 id="检查你的激素水平"><a href="#检查你的激素水平" class="headerlink" title="检查你的激素水平"></a>检查你的激素水平</h4><p>如果你是一个男性柔术运动员，我建议你去内分泌专家那检查你的激素水平。如果你的睾丸酮激素水平过低，不管你如何训练，你的身体素质都不会有较大的提升。一个好医生会建议你使用多种补剂和药品来解决这个问题。</p>
<h4 id="体操"><a href="#体操" class="headerlink" title="体操"></a>体操</h4><p>总体来说，拥有了功能性力量与身体控制能力，你将很难被击败。如果让我在力量训练之外再挑选一个最为柔术的赋值训练，那就是体操了。</p>
<h4 id="攀岩"><a href="#攀岩" class="headerlink" title="攀岩"></a>攀岩</h4><p>另一项能直接对柔术的运动表现及其力量提升极大的运动就是攀岩了，尤其是握力。</p>
<h4 id="举重"><a href="#举重" class="headerlink" title="举重"></a>举重</h4><p>举重对运动表现的提升不是通过几组二头弯举或者卧推就可以的，那是健身。你需要在专业教练的指导下练习奥运举和力量举（例如挺举，深蹲）。</p>
<h3 id="你该怎么做"><a href="#你该怎么做" class="headerlink" title="你该怎么做"></a>你该怎么做</h3><p>提高柔术水平不仅仅是提升柔术技术。我喜欢柔术的技术，它是那样的直接有效，令人着迷。如果你想在道垫上降服对手，高质量的动作是必不可少的。但这还不够。你可以在<a href="http://www.jiujitsubrotherhood.com/brazilian-jiu-jitsu-tips-a-c-t-model/" target="_blank" rel="noopener">这篇文章</a>中找到答案。</p>
<p>真正的武术家是一个在各个方面力精益求精的人。这包括变得更加强壮。如果你想成为顶级的柔术家，将你的体能提升到极限是你的必修课。</p>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2017/12/26/2017-12-26-从一道网易面试题浅谈-Tagged-Pointer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/26/2017-12-26-从一道网易面试题浅谈-Tagged-Pointer/" itemprop="url">从一道网易面试题浅谈 Tagged Pointer</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-26T00:00:00+08:00">
                2017-12-26
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  578字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这篇博客九月就想写了，因为赶项目拖了到现在，抓住17年尾巴写吧~</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>上次看了一篇 <a href="https://www.jianshu.com/p/cec2a41aa0e7" target="_blank" rel="noopener">《从一道网易面试题浅谈OC线程安全》</a> 的博客，主要内容是：</p>
<p>作者去网易面试，面试官出了一道面试题：下面代码会发生什么问题？</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *target;</span><br><span class="line"><span class="comment">//....</span></span><br><span class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_queue_create(<span class="string">"parallel"</span>, DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span> ; i++) &#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(queue, ^&#123;</span><br><span class="line">        <span class="keyword">self</span>.target = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"ksddkjalkjd%d"</span>,i];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>答案是：会 crash。</p>
<p>我们来看看对<code>target</code>属性（<code>strong</code>修饰）进行赋值，相当与 MRC 中的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (void)setTarget:(NSString *)target &#123;</span><br><span class="line">    if (target == _target) return;</span><br><span class="line">    id pre = _target;</span><br><span class="line">    [target retain];//1.先保留新值</span><br><span class="line">    _target = target;//2.再进行赋值</span><br><span class="line">    [pre release];//3.释放旧值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为在 <em>并行队列</em> <code>DISPATCH_QUEUE_CONCURRENT</code> 中<em>异步</em> <code>dispatch_async</code> 对 <code>target</code>属性进行赋值，就会导致 target 已经被 <code>release</code>了，还会执行 <code>release</code>。这就是向已释放内存对象发送消息而发生 crash 。</p>
<h3 id="但是"><a href="#但是" class="headerlink" title="但是"></a>但是</h3><p>我敲了这段代码，执行的时候发现并不会 crash~</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *target;</span><br><span class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_queue_create(<span class="string">"parallel"</span>, DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span> ; i++) &#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(queue, ^&#123;</span><br><span class="line">    	<span class="comment">// ‘ksddkjalkjd’删除了</span></span><br><span class="line">        <span class="keyword">self</span>.target = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>,i];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原因就出在对 <code>self.target</code> 赋值的字符串上。博客的最后也提到了 - <em>‘上述代码的字符串改短一些，就不会崩溃’</em>，还有 <code>Tagged Pointer</code> 这个东西。</p>
<p>我们将上面的代码修改下：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *str = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>, i];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%d, %s, %p"</span>, i, object_getClassName(str), str);</span><br><span class="line"><span class="keyword">self</span>.target = str;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0, NSTaggedPointerString, 0x3015</span><br></pre></td></tr></table></figure>
<p>发现这个字符串类型是 <code>NSTaggedPointerString</code>，那我们来看看 Tagged Pointer 是什么？</p>
<h3 id="Tagged-Pointer"><a href="#Tagged-Pointer" class="headerlink" title="Tagged Pointer"></a>Tagged Pointer</h3><p>Tagged Pointer 详细的内容可以看这里 <a href="http://www.infoq.com/cn/articles/deep-understanding-of-tagged-pointer" target="_blank" rel="noopener">深入理解Tagged Pointer</a>。</p>
<p>Tagged Pointer 是一个能够提升性能、节省内存的有趣的技术。</p>
<ul>
<li>Tagged Pointer 专门用来存储小的对象，例如 <strong>NSNumber</strong> 和 <strong>NSDate</strong>（后来可以存储小字符串）</li>
<li>Tagged Pointer 指针的值不再是地址了，而是真正的值。所以，实际上它不再是一个对象了，它只是一个披着对象皮的普通变量而已。</li>
<li>它的内存并不存储在堆中，也不需要 malloc 和 free，所以拥有极快的读取和创建速度。</li>
</ul>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><p><a href="https://www.jianshu.com/p/cec2a41aa0e7" target="_blank" rel="noopener">从一道网易面试题浅谈OC线程安全</a></p>
</li>
<li><p><a href="http://www.infoq.com/cn/articles/deep-understanding-of-tagged-pointer" target="_blank" rel="noopener">深入理解Tagged Pointer</a></p>
</li>
<li><p><a href="http://www.cocoachina.com/ios/20150918/13449.html" target="_blank" rel="noopener">【译】采用Tagged Pointer的字符串</a></p>
</li>
</ul>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2017/12/19/2017-12-19-为博客添加-Gitalk-评论插件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/2017-12-19-为博客添加-Gitalk-评论插件/" itemprop="url">为博客添加 Gitalk 评论插件</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-19T00:00:00+08:00">
                2017-12-19
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  842字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于 <strong>Disqus</strong> 对于国内网路的支持十分糟糕，很多人反映 Disqus 评论插件一直加载不出来。而我一直是处于翻墙状态的~（话说你们做程序员的都不翻墙用Google的吗😅，哈哈，吐嘈下）</p>
<p>针对这个问题，我添加了<a href="https://github.com/gitalk/gitalk" target="_blank" rel="noopener">Gitalk</a> 评论插件。在此，非常感谢 <a href="https://github.com/FeDemo" target="_blank" rel="noopener">@FeDemo</a> 的推荐 。</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="Gitalk-评论插件"><a href="#Gitalk-评论插件" class="headerlink" title="Gitalk 评论插件"></a>Gitalk 评论插件</h3><p>首先来看看 Gitalk 的界面和功能：</p>
<p><a href="https://gitalk.github.io/" target="_blank" rel="noopener"><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fmm4u3j0lmj30nk0kl40i.jpg" alt></a></p>
<p>gitalk 使用 Github 帐号登录，界面干净整洁，最喜欢的一点是支持 <code>MarkDown语法</code>。</p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>Gitalk 是一个利用 Github API,基于 Github issue 和 Preact 开发的评论插件，在 Gitalk 之前还有一个 <a href="https://github.com/imsun/gitment" target="_blank" rel="noopener">gitment</a> 插件也是基于这个原理开发的,不过 gitment 已经很久没人维护了。</p>
<p>可以看到在 gitalk 的评论框进行评论时，其实就是在对应的 issue 上提问题。</p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fmm5916av1j30i209rab7.jpg" alt="gitalk评论框"></p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fmm596ggkfj30mx0gfjuk.jpg" alt="Github issue"></p>
<h3 id="集成-Gitalk"><a href="#集成-Gitalk" class="headerlink" title="集成 Gitalk"></a>集成 Gitalk</h3><p>到这里，你应该对 Gitalk 有个大致的了解了，现在，开始集成 gitalk 插件吧。</p>
<p>将这段代码插入到你的网站：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Gitalk 评论 start  --&gt;</span><br><span class="line">&#123;% <span class="keyword">if</span> site.gitalk.enable %&#125;</span><br><span class="line">&lt;!-- Link Gitalk 的支持文件  --&gt;</span><br><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://unpkg.com/gitalk/dist/gitalk.css"</span>&gt;</span><br><span class="line">&lt;script src=<span class="string">"https://unpkg.com/gitalk@latest/dist/gitalk.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">"gitalk-container"</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> gitalk = <span class="keyword">new</span> Gitalk(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// gitalk的主要参数</span></span><br><span class="line">		clientID: <span class="string">`Github Application clientID`</span>,</span><br><span class="line">		clientSecret: <span class="string">`Github Application clientSecret`</span>,</span><br><span class="line">		repo: <span class="string">`存储你评论 issue 的 Github 仓库名`</span>,</span><br><span class="line">		owner: <span class="string">'Github 用户名'</span>,</span><br><span class="line">		admin: [<span class="string">'Github 用户名'</span>],</span><br><span class="line">		id: <span class="string">'页面的唯一标识，gitalk会根据这个标识自动创建的issue的标签'</span>,</span><br><span class="line">    </span><br><span class="line">    &#125;);</span><br><span class="line">    gitalk.render(<span class="string">'gitalk-container'</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&#123;% endif %&#125;</span></span><br><span class="line"><span class="regexp">&lt;!-- Gitalk end --&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们需要关心的就是配置下面几个参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">clientID: <span class="string">`Github Application clientID`</span>,</span><br><span class="line">clientSecret: <span class="string">`Github Application clientSecret`</span>,</span><br><span class="line">repo: <span class="string">`Github 仓库名`</span>,<span class="comment">//存储你评论 issue 的 Github 仓库名（建议直接用 GitHub Page 的仓库名）</span></span><br><span class="line">owner: <span class="string">'Github 用户名'</span>,</span><br><span class="line">admin: [<span class="string">'Github 用户名'</span>], <span class="comment">//这个仓库的管理员，可以有多个，用数组表示，一般写自己,</span></span><br><span class="line">id: <span class="string">'window.location.pathname'</span>, <span class="comment">//页面的唯一标识，gitalk 会根据这个标识自动创建的issue的标签,我们使用页面的相对路径作为标识</span></span><br></pre></td></tr></table></figure>
<p>当然，还有其他很多参数，有兴趣的话可以 <a href="https://github.com/gitalk/gitalk#options" target="_blank" rel="noopener"> 点这里</a>。</p>
<p>比如我就增加了这个全屏遮罩的参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">distractionFreeMode: true,</span><br></pre></td></tr></table></figure>
<h3 id="创建-Github-Application"><a href="#创建-Github-Application" class="headerlink" title="创建 Github Application"></a>创建 Github Application</h3><p>Gitalk 需要一个 <strong>Github Application</strong>，<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">点击这里申请</a>。</p>
<p>填写下面参数：</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fmm7jaib6fj30jo0gaacs.jpg" alt></p>
<p>点击创建</p>
<p>获取 <code>Client ID</code> 和 <code>Client Secret</code> 填入你的我们 Gitalk 参数中</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fmm7jrzff6j30lc0budhp.jpg" alt></p>
<p>当你参数都设置好，将代码推送到 Github 仓库后，没什么问题的话，当你点击进入你的博客页面后就会出现评论框了。</p>
<p>当你用 github 帐号登录（管理员），并且第一次加载该会比较慢，因为第一次加载会自动在你 <code>repo</code> 的仓库下创建对应 issue。</p>
<p>比如说这样：</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fmm867n88cj30l809mjse.jpg" alt></p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fmm8a0i0jkj30rr0ct42t.jpg" alt></p>
<p>当然，你也可以手动创建issue作为 gitalk评论容器。只要有 <code>Gitalk</code> 标签 和 <code>id</code> 对应标签就可以。比我我自己创建的 <a href="https://github.com/qiubaiying/qiubaiying.github.io/issues/38" target="_blank" rel="noopener">About issue</a> 。</p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>最后说几句吐嘈几句， Gitalk 需要你点开每篇文章的页面才会创建对应的 issue,对我来说真是个糟糕的体验（文章有点多~）。</p>
<p>当然，也有解决办法，这篇 <a href="https://draveness.me/git-comments-initialize" target="_blank" rel="noopener">自动初始化 Gitalk 和 Gitment 评论</a>，就解决了这个问题。</p>
<p>最后，<a href="https://github.com/qiubaiying/qiubaiying.github.io" target="_blank" rel="noopener">给个 star 吧</a>~</p>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2017/07/10/2017-07-10-「体能训练理论」之功能性/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/10/2017-07-10-「体能训练理论」之功能性/" itemprop="url">「体能训练理论」之功能性</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T00:00:00+08:00">
                2017-07-10
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.5k字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  8分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>体能训练是一种开源的程序它所依仗的并不是固有的方法手段，而是能够贯穿始终的逻辑，它是一种指导实践的思维方式，我们管它叫“体能思路”。</p>
<p>体能思路有两个方向，一个是原点，一个是过程。所谓原点我们认为是人体的本质属性，比如之前我们分享的五大运动素质以及动力链理论。所谓过程是我们分析问题实现目的的思考方向以及逻辑，它主要体现在接下来要跟大家分享的功能性原则和金字塔。</p>
<p>今天先来说功能性原则。</p>
<h2 id="功能性"><a href="#功能性" class="headerlink" title="功能性"></a>功能性</h2><p>我们所说的功能性是一种解决问题的思维方式，而功能性训练则定义了一种多关节参与，多平面运动的复杂练习。功能性训练是具体的，比较好理解，我就不赘述了，也不评价其优劣，因为在“功能性”的思维方式下，只存在目标之下的合适与否。</p>
<h3 id="什么是功能性？"><a href="#什么是功能性？" class="headerlink" title="什么是功能性？"></a>什么是功能性？</h3><p>我们把它定义为目标导向下的效率，所以它是一种程度的体现。如果一个练习与目标的相关性强，那么我们认为它具备较强的功能意义；而如果一个练习与它的目标背道而驰，那么我们就认为它缺乏功能意义。</p>
<p>举个例子，对于偏瘫患者来说，一个手指的屈伸就已经具备非常强的功能意义了，而对于一个马拉松爱好者来说，静蹲的价值可能并不是想象中那么高。</p>
<p>一般来说，在思考功能性问题的时候我习惯从以下三个方面入手：<strong>肌肉的生理适应</strong> 、<strong>动作模式</strong> 和 <strong>专项需求</strong>。</p>
<h4 id="1-肌肉的生理适应"><a href="#1-肌肉的生理适应" class="headerlink" title="1. 肌肉的生理适应"></a>1. 肌肉的生理适应</h4><p>其实练肌肉谁都会，是一个相对好入手的技能，但是当你给这个行为赋予体能训练使命的时候就需要思考一些问题，比如说你现在练习所发展的东东真的是你实际运动中所需要的东东么？</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fhg24pm22dj30e709474v.jpg" alt></p>
<p>我们都知道肌肉的生理收缩模式可以简单的分为向心收缩，离心收缩和静力收缩。现在的研究表明，这三种收缩模式的练习所产生的适应性提高存在显著的特异性。也就是说我向心练习所发展的能力只在向心运动中表现最好，在离心和静力中都不佳。同样，离心收缩也只能获得最好的离心能力收益。而静力就更变态，其训练最佳效果仅仅体现在所锻炼的关节角度下，换一个角度能够迁移的效果有可能都不到一半儿。这样看来，你的训练是不是并没有达到你想要的效果呢？</p>
<p>举个例子：</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fhg251pmatj30go0b5q5d.jpg" alt></p>
<p>为什么静蹲对于跑步爱好者来说可能并没有那么理想？因为膝关节股四头肌在跑步中以离心缓冲为主，而且角度在伸膝末端的30°左右，而静蹲却是在屈曲90°左右的角度下呆着不动……着不动……不动……动……</p>
<p>除此之外，需要考虑的问题还很多，比如说发力模式，是加速？减速？还是匀速？再比如关节活动角度上发力点的位置，是伸展末端发力？屈曲极限发力？还是在屈伸过程中的某一点发力？阻力加在哪里，就会在哪里产生最好的适应，那么功能的意义就体现在这里。</p>
<h4 id="2-动作模式"><a href="#2-动作模式" class="headerlink" title="2. 动作模式"></a>2. 动作模式</h4><p>动作模式是动作程序的体现，而基础动作模式是诸多复杂动作模式共性的抽象体现，并且基础动作模式一定是符合解剖结构和生物力学特点的，说白了也就是我们人体被设计来应该完成的动作。</p>
<p>如果说大多数运动都可以认为是基础动作模式的升级与排列组合，同时基础动作模式本身又能衍生出来很多训练动作，那么选择和实际运动相对应的练习就是另一个功能性的体现了。</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhg25l7ep2j30g609o0ue.jpg" alt></p>
<p>比如说发展起跳能力，因为跳是蹲的升级，所以我一定首选深蹲练习；再比如说跑步，存在大量的下肢摆动与支撑的交替，摆动可以认为是下肢开链屈髋与蹬伸，而支撑可以认为是下肢单腿蹲的一瞬间，那么我会选择箱式单腿蹲，保加利亚蹲，悬垂屈髋等等；再再比如，拳击是基于“旋转”加“上肢推”加“单腿蹲”的动作模式，那么我就要练习剪蹲…旋转…单臂…推举…吗？</p>
<p>其实动作模式的选择要结合动力链一起去思考，这里除了要思考开链还是闭链之外，还要考虑动力链的完整性以及发力的顺序或者说是力学结构。说到上肢推的动作模式，水平推的话我相信很多人都会想到卧推和俯卧撑，那么这两个动作的功能性如何评价呢？</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhg26a2ve0j30go0ce76n.jpg" alt></p>
<p><strong>卧推</strong>，一个挺奇葩的动作，奇葩在哪呢？来，咱们数数卧推的主动关节都有哪些：肩关节，肘关节。那么我们上肢链在上肢推动作模式下参与的关节都有哪些呢？肩关节，肘关节！就这些么？再想想！其实你还疏漏了一个非常重要的关节——<strong>肩胛胸关节</strong>！几乎所有上肢的动作都以肩胛胸关节的运动为基础，而卧推却并没有，特别是标准的卧推~</p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fhg26h6oejj30go09lwgj.jpg" alt></p>
<p><strong>俯卧撑</strong>，虽然肩胛胸，肩关节，肘关节全面参与到运动中去，但不巧的是它是一个闭链运动，而实际运动中我们的上肢会以开链为主！呵呵~</p>
<p>别着急，认真你就输了！上面两段其实是个伪命题，我这么做主要是想通过这个平易近人的例子来帮助大家掌握的分析问题的思路！如果你需要发展上肢最大力量表现，那么显然卧推是你的首选。而如果你要优化上肢的力学结构，特别是水平推的发力顺序，那么俯卧撑是你首选。再如果你要提高上肢的延展性以及伴随旋转的加速能力，那么单臂水平推的练习给你的帮助最大！</p>
<p>所以，选择什么，看目标喽~</p>
<h4 id="3-专项需求"><a href="#3-专项需求" class="headerlink" title="3. 专项需求"></a>3. 专项需求</h4><p>其实这个非常好理解，也是功能性原则的根本目的，但是为了和上面两个方向区分开，这里主要针对的是不同的运动素质需求。</p>
<p>Q：对一个英超的后卫进行长距离高强度的游泳练习是否具备功能性意义？！</p>
<p>A：具备！</p>
<p>Q：为什么？</p>
<p>A：因为他喜欢游泳，这个可以让他心情愉悦然后更好的训练和比赛！</p>
<p>咳咳！当然，这样的答案是合情合理的！但是我们不妨换一个角度去分析。</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhg26rdi6vj30go0b4goo.jpg" alt></p>
<p>英超，几乎是足球联赛中对抗最强的，他们的后卫每场比赛动不动就跑个8千1万的，而这8千1万真心不是慢慢悠悠颠儿下来的，而是各种加速减速变向拼抢，所以其强度非常之大。那么这就需要很好的心肺系统功能，一方面体现在有氧与无氧耐力上，另一方面呼吸器官的机能上。游泳练习，不仅可以提高有氧以及无氧耐力，其水环境还可以给胸扩张带来阻力，直接锻炼了呼吸肌的收缩能力。另外，水环境真的能够给人们带来愉悦的感觉，特别是水流水压给肌肉和筋膜的按摩效果，真的是一举两得的“功能性”训练。</p>
<p>还有，你以为篮球运动员的拳击练习真的只是给枯燥乏味的体能训练增加一点乐趣么？并不是！</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhg276m81pj31h50rgtbv.jpg" alt></p>
<p><strong>1. 拳击可以在发生场内冲突的时候很好地保护自己；</strong></p>
<p><strong>2. 拳击运动可以强化旋转动作模式下的速度、稳定、和准确性；</strong></p>
<p><strong>3. 拳击是手脚高度协调的运动，对于发展手脚搭配的动作灵敏有神奇的效果。</strong></p>
<p>而这些不就是一名篮球运动员所需要的么？！</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>所以，功能性原则，解决的是“<strong>为什么练</strong>（for！not why）以及 <strong>练什么</strong>”的问题！</p>
<p>如果我们是简单活动活动身体那就算了，但如果我们要进行一个有针对性的体能训练，那么请琢磨琢磨你选择的动作是否合理，是否能够满足你的专项需求！</p>
<p>所以，招财猫式弹力带抗阻外旋真的是练习肩袖首推的动作么？</p>
<p>所以，蚌式练习和dirty dog真的是发展髋外旋外展能力最好的练习么？</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhg28jvnhqj30dw099q3z.jpg" alt></p>
<p>所以，仰卧卷腹发展出来的腹直肌是好看呢？还是好用呢？</p>
<p>所以，我们真的要来一次大清洗，摒弃掉我们以前那些练习么？</p>
<p>当然不要！每一个动作都有它存在的意义，都有它的价值所在！有可能这个动作和你要发展的能力不直接相关，但是它可能是你进行“功能性”训练的基础，你不得不去做它！</p>
<p>所以，训练的逻辑很重要！</p>
<blockquote>
<p>转自<a href="https://zhuanlan.zhihu.com/p/20786373" target="_blank" rel="noopener">《体能训练之功能性》</a></p>
</blockquote>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxyun.github.io/2017/07/10/2017-07-10-「体能训练理论」之动力链/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaxyun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/about-me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaxyun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/10/2017-07-10-「体能训练理论」之动力链/" itemprop="url">「体能训练理论」之动力链</a></h1>
        

        <div class="post-meta">
			

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于&#58;</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T00:00:00+08:00">
                2017-07-10
              </time>
            

            

            
          </span>



          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3.5k字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  11分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>与其说体能训练是一种行为，不如说体能训练是一种程序。只要符合逻辑，就可以自由组合。<br> 那么体能训练的逻辑是什么？我们将之总结为：<a href="http://qiubaiying.top/2017/07/10/%E4%BD%93%E8%83%BD%E8%AE%AD%E7%BB%83%E7%90%86%E8%AE%BA-%E4%B9%8B%E5%8A%A8%E5%8A%9B%E9%93%BE/" target="_blank" rel="noopener"><strong>动力链</strong></a>、<a href="http://qiubaiying.top/2017/07/10/%E4%BD%93%E8%83%BD%E8%AE%AD%E7%BB%83%E7%90%86%E8%AE%BA-%E4%B9%8B%E5%8A%9F%E8%83%BD%E6%80%A7/" target="_blank" rel="noopener"><strong>功能性</strong></a>、<a href="http://qiubaiying.top/2017/07/10/%E4%BD%93%E8%83%BD%E8%AE%AD%E7%BB%83%E7%90%86%E8%AE%BA-%E4%B9%8B%E9%87%91%E5%AD%97%E5%A1%94/" target="_blank" rel="noopener"><strong>金字塔</strong></a>。</p>
<h2 id="动力链"><a href="#动力链" class="headerlink" title="动力链"></a>动力链</h2><p>如果说 <strong>五大运动素质</strong>（力量、速度、耐力、灵敏、柔韧）代表了体能的宏观表现，那么动力链理论则阐释了人体解剖结构在运动中的客观规律，这二者同为人体的本质属性。</p>
<p>动力链这一理论早在1875年就被提出过，当时的定义还很简单，就是指几个相邻的关节所组成的复杂动作单元。后来在不断地实践与研究中，动力链理论也不断的升级，越来越清晰，越来越客观，也越来越复杂，并且逐渐成为了体能训练师们必备的思考工具之一。</p>
<p>来看看动力链的英文解释:</p>
<blockquote>
<p>The concept of the kinetic chain originated in 1875, when a mechanical engineer named Franz Reuleaux proposed that if a series of overlapping segments were connected via pin joints, these interlocking joints would create a system that would allow the movement of one joint to affect the movement of another joint within the kinetic link. Dr. Arthur Steindler adapted this theory in 1955, and included an analysis of human movement. Steindler suggested that the extremities be viewed as a series of rigid, overlapping segments and defined the kinetic chain as a “combination of several successively arranged joints constituting a complex motor unit.” The movements that occur within these segments present as two primary types—open and closed.</p>
</blockquote>
<p>这种模糊形容根本无法让人们理解它真正的内核，虽然它看起来就像是一堆联动的齿轮和杠杆。实际上它也真的很像一堆齿轮和杠杆，有的负责驱动，有的负责传力，有的负责稳定。</p>
<p>为了方便大家理解，下面我要将这个理论拆解开来跟大家分享。</p>
<p>首先，我们需要从以上的定义中提炼出来一些关键词，比如说 “运动”、“几个”、“相邻”等等。那么这几个词分别代表了什么？</p>
<ol>
<li>我们讨论问题的角度是<strong>运动</strong>的；</li>
<li>我们需要考虑的<strong>人体解剖结构</strong>问题；</li>
<li>我们需要考虑相邻关节的<strong>协作关系</strong>；</li>
<li>我们需要分析每一个关节的<strong>使用特点</strong>。</li>
</ol>
<p>所以，它似乎并不能被完美的定义，而是只可意会不可言传。<br> 那么关于动力链，我们需要掌握两个最基本的知识：<strong>动力链模型</strong>、<strong>开链与闭链</strong>。</p>
<h3 id="动力链模型"><a href="#动力链模型" class="headerlink" title="动力链模型"></a>动力链模型</h3><p>在动力链理论中，我们考虑运动的最小单位是<strong>关节</strong>，诸多关节运动的协作产生了整体上的复杂动作。所以每一个关节的功能就决定了整体动作的表现，任何一个关节功能受限都会导致整体动作的失衡。 </p>
<p>而我们所指的关节功能，可以从生物力学角度简单的概括为：</p>
<ul>
<li><strong>灵活</strong>(<strong>M</strong>,Mobility)</li>
<li><strong>稳定</strong>(<strong>S</strong>,Stability)</li>
</ul>
<p>但看起来简单的两个词，其实意义非常。</p>
<h4 id="什么是灵活？"><a href="#什么是灵活？" class="headerlink" title="什么是灵活？"></a>什么是灵活？</h4><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhg2avap5sj30ao08rdg4.jpg" alt></p>
<p>很多人的第一反应就是能自由的运动呗~然后部分专业人士可能会想到活动度。但是你的关节如果仅仅具备很好的活动度就能够胜任运动中的需求么？显然是不能的。所以灵活的意义远不止关节活动度，关节活动度仅仅是灵活的基础，而更重要的还有产力的能力。没错，这里的灵活既包括关节主被动活动范围，也包括产力的能力，比如产力的大小，产力的快慢等等。<br> 举个例子：小明的髋关节活动范围非常好，能竖叉能横叉，但是臀大肌并没有很好的力量，所以不能够支撑你的跑步与跳跃，所以此时的髋关节灵活性仍然是不足的，只不过这里强调的是力量的缺失。</p>
<h4 id="什么是稳定？"><a href="#什么是稳定？" class="headerlink" title="什么是稳定？"></a>什么是稳定？</h4><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhg2b1gendj30fa08t74f.jpg" alt></p>
<p>稳定就是稳定呗~就是待着不动呗~就是牢固呗~灵活还能说出个关节活动度，而稳定的定义真的让很多人摸不到头脑，因为似乎“稳定”一词已经很好地形容了关节的功能表现。但是实际上我们仍然可以对其进行深究，并且这样做是有意义的，因为表现的不同直接影响训练的手段。</p>
<p>如果我们把“稳定”定义为是一种提供安全性的保护，那么我们就可以假想出两个现象：</p>
<ol>
<li>一个非常贵重的瓷器抱在手中，我不能把它摔碎，所以我抱着不动~</li>
<li>同样是这个非常贵重的瓷器抱在手中，我不能把它摔碎，但是我可以慢慢的把它放在地上。<br>同样是保护瓷器不被摔碎，但是却有两个表现，一个是hold住，另外一个是慢慢的放在地上，一个不动，一个动。所以我们人体关节的稳定也是如此，既包括保持身体姿态，关节位置的相对固定，也包括有控制的缓冲外力，退让做功。</li>
</ol>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fhg2b6eo7uj30m80h477k.jpg" alt></p>
<p>举个例子：我们的核心区域在运动中应该尽可能的保持姿态的稳定，所以是抱着瓷器不动；我们的膝关节在走路与跑步中从伸到屈，缓冲脚落地产生的冲击力，所以是抱着瓷器往下放。 </p>
<p>在了解了 SM (稳定和灵活)的意义之后，更重要的是明白：这两种并不会孤立的存在，而是相辅相成同时存在的，只不过在人体整体动力链中体现的侧重点不一样，在肢体的协同运动中扮演的角色不一样。比如对于核心区域来说，灵活恰是其稳定的基础，因为不同体位下脊柱的排列形式直接影响稳定的表现。</p>
<p>当 SM 代表了关节功能之后，在人体的整体运动结构中，不同的关节所凸显出来的功能是不同的，并且它们遵循一定的逻辑分布。</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fhg2bewsh2j30hs0b0t8y.jpg" alt></p>
<p>从下往上说：</p>
<ol>
<li><p>足弓——稳定</p>
<p> 第一个缓冲冲击力的关节，并且没有多大的关节活动度。</p>
</li>
<li><p>足踝——灵活</p>
<p> “足” “踝”形成了一个稳定与灵活兼备的整体，但是在运动中它是下肢蹬伸最后一个主动发力的关节，并且无时无刻不在调整着身体与地面之间的位置关系，所以在这里我们更强调它的灵活性。</p>
</li>
<li><p>膝关节——稳定</p>
<p> 强大的承重关节，且仅存在屈伸的动作（屈膝位的内外旋的意义是提供可控的缓冲空间，并非叫你主动旋转），更重要的是，无论走路、跑步、跳跃，膝关节都是非常重要的离心缓冲关节。</p>
</li>
<li><p>髋关节——灵活</p>
<p> 强大的发力关节，而且活动范围也非常广泛，它引领着下肢的动作产生。但是由于位置与功能的特殊，所以其稳定性也相当重要，直接可以影响核心的稳定结构，特别是在闭链状态下。</p>
</li>
<li><p>腰椎——稳定</p>
<p> 相对的绝对稳定体。所谓绝对，是因为腰椎所处的位置恰好为核心地带，这里的功能是维持姿态以及为上下肢的运动提供稳定基础，所以要“抱着缸不动”。而所谓相对，是因为不同的体位下腰椎的姿态是需要随之调整的，并不能以不变应万变。</p>
</li>
<li><p>胸椎——灵活</p>
<p> 胸椎的灵活性其实并不好，但是相比于腰椎来说就好太多了，特别是在旋转动作上。在旋转鞭打的动作模式中，胸椎是继下肢产力之后的第一个角速度放大的关节，其灵活程度直接影响了上肢的鞭打效果。当然，在更多的时候胸椎要参与承重，但即便承重，也是以其良好的灵活性为基础的，比如说手臂上举过头负重的动作。</p>
</li>
<li><p>颈椎——稳定</p>
<p> 虽然很灵活，但却需要很稳定！因为头部的位置变化会直接改变身体肌张力的大小分布，这个不仅可以让我们身体姿态发生变化，还会破坏掉本体感觉的准确性。当然，这也是猫在空中可以转体的原因，以及为什么我们打拳的时候不能回头。</p>
</li>
<li><p>肩胛胸关节——稳定</p>
<p> 这是一个很奇葩的关节，从动力链结构上看，它是稳定关节，但稳定的并不是它自己，而是肩关节。在实际运动中，肩胛胸关节和肩关节是联动运动的，而且前者为后者提供稳定性，是后者得以安全展现灵活的基础。但是这个“稳定”恰恰是通过肩胛胸关节本身的灵活性来展现的，比如手臂上举时的上回旋。</p>
</li>
<li><p>肩关节——灵活</p>
<p> 没的说，人体最灵活的关节，也是人体最不稳定的关节，其球窝关节的解剖结构已经说明了一切。</p>
</li>
<li><p>肘关节——稳定</p>
<p>结构上跟膝关节相对，但是实际上要比膝关节灵活的多。所以如果进化论成立的话，人类从四脚着地变成双脚着地的过程，使我们的下肢关节趋向于稳定，上肢关节趋向于灵活。而这正与 “开链”或者“闭链”的需求相适应。</p>
</li>
</ol>
<h3 id="开链-amp-闭链"><a href="#开链-amp-闭链" class="headerlink" title="开链&amp;闭链"></a>开链&amp;闭链</h3><p>我们的关节同时存在S与M，而在整体的运动中有不同的体现，甚至于同样是S或者M的上下肢关节却存在了显著的差别。那么在此我们需要引出一个新的概念：<strong>开链</strong> &amp; <strong>闭链</strong>。</p>
<h4 id="开链"><a href="#开链" class="headerlink" title="开链"></a>开链</h4><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fhg2bltahoj30dg09h74k.jpg" alt></p>
<p>开链，简单地说就是我们身体产生力量，改变了外界物体的运动状态。比如说哑铃二头弯举，投掷，摘苹果等动作都是开链动作。我们可以认为我们的身体在对抗趋于无穷小的阻力，那么我们就可以随意改变物体的运动状态，随便摆弄它，所以此时我们的肢体的灵活性就可以充分的发挥。比如我们的上肢就是以开链运动为主的，所以它整体表现出更好的灵活性。</p>
<h4 id="闭链"><a href="#闭链" class="headerlink" title="闭链"></a>闭链</h4><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fhg2bq4z76j30fk0dp0tf.jpg" alt></p>
<p>闭链，简单的说就是我们的身体产生力量，却没能推动外界的物体，反而改变了我们自身的运动状态。比如说跑步与深蹲，我们扒地，我们蹬地，并没有让地板产生位移，我们自己却向前或者向上运动了。所以我们可以认为闭链运动时，我们的身体在对抗趋于无穷大的阻力，我们根本不可能改变它，所以只能运动我们自己。而在面对这样无穷大的阻力的时候，我们需要将我们的关节摆在力学结构最优的位置上才能发挥我们自身的最大经济性和效率，而且在这个状态下，各个关节的位置直接影响了身体的整体姿态和状态，所以灵活性被抑制。我们的下肢，最擅长、做的最多的就是闭链运动，所以它更加的趋于稳定。</p>
<p>开链和闭链直接影响我们的训练适应，因为它们所表现的力学结构是不同的。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>了解动力链并不是让我们<strong>装逼</strong>的，而是让我们更加了解人体的客观规律来指导训练的。</p>
<p>它是一个非常好的思考工具。比如我们在训练下肢力量的时候，我们就需要考虑髋关节灵活性对于下肢力量表现的影响，于是乎我们可能更加重点强化髋的产力能力。但是当考虑到屈髋动作时，也许实际中更多的是开链的屈髋，所以我们就能以此为依据来选择髂腰肌和股直肌的训练动作。</p>
<p>除此之外，每个关节本身的功能完整性是非常重要的，如果一个关节有功能缺陷，那么在整体运动中它就不能够尽到它的职责，所以一定会有另外一个或者几个关节来代偿它的功能，那么就相当于一个3人的团队，一个请假了，另外两个就得加班。如果一次两次没关系，它要是请了一年的产假，那么另外俩人可能会由于长期超负荷工作而积劳成疾。当然，对于公司来说我可以再雇人，但是我们的人体可没有能再多长一个关节之说。</p>
<p>所以其实很多跑步膝的问题恰是由于髋和踝的功能缺陷而导致的。</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fhg2buv4nwj30ia0a2dfx.jpg" alt></p>
<p><strong>最后我要再次强调</strong>：任何一个关节，稳定与灵活同时存在，只不过体现的程度和侧重不同。在动力链中，灵活的关节不代表没有稳定，更不代表稳定不重要；稳定的关节也需要灵活，而且灵活可能是稳定的基础。</p>
<p>了解了动力链，你会更懂运动中的人体，也许你有了思考问题的方向，但仍然缺少方法，所以你还需要具备<a href="http://qiubaiying.github.io/2017/07/10/%E4%BD%93%E8%83%BD%E8%AE%AD%E7%BB%83%E7%90%86%E8%AE%BA-%E4%B9%8B%E5%8A%9F%E8%83%BD%E6%80%A7/" target="_blank" rel="noopener">「功能性」</a>的思维方式。</p>
<blockquote>
<p>转自 <a href="https://zhuanlan.zhihu.com/p/20774747" target="_blank" rel="noopener">《体能训练之动力链》</a></p>
</blockquote>

          
        
      
    </div>
    
    
    
	<div>
      
	</div>

    

    

    
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/about-me.jpg" alt="Xiaxyun">
            
              <p class="site-author-name" itemprop="name">Xiaxyun</p>
              <p class="site-description motion-element" itemprop="description">欢迎来到我的博客小站~~</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">23</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xiaxyun" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/yourname" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/yourname" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xiaxyun</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">41.9k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":false,"react":{"opacityDefault":0.5,"opacityOnHover":0}},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
